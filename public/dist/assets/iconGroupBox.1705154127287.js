import{u as e,P as a,r as t,a as o,G as d,o as l,p as n,b as s,c as i,d as r,e as u,k as p,l as c,F as m,f as v,g as f,h as g,T as y,j as x,I as G,m as k}from"./index.1705154127287.js";import{_ as T,S as h}from"./index.17051541272872.js";import{$ as j}from"./jquery.1705154127287.js";import"./href.1705154127287.js";const B=["onClick"],C={__name:"GroupItem",props:{data:Object,reload:Function},setup(k){const C=k,_=e(),I=a([]),b=t(),w=t({});window.$=j;const D=()=>{_.state.editStatus&&(_.state.editStatus=!1)};let O=!0;const L=()=>{_.commit("setLink",w.value),j(`[data-id='${b.value}']`).find(".names").text(w.value.name)};let S=null;const V=()=>{const e=S.toArray();let a=[];e.forEach(((e,t)=>{let o=_.getters.find(e);o.pid=b.value,o.sort=t,a.push(o)})),_.commit("updateDiffLink",Object.assign([],a)),n.emit("RefreshLink"),"add"===C.data.type&&(clearTimeout(E),C.reload())};let A=null;let E=setTimeout((()=>{}));return o((()=>{var e,a;E=setTimeout((()=>{"add"===C.data.type&&O&&(clearTimeout(E),C.reload())}),2e3),b.value=C.data.pid,w.value=_.getters.find(C.data.pid),I.value=d([],_.getters.findChildren(C.data.pid)),e=document.getElementById("iconGroupItem"),a={animation:200,delay:500,delayOnTouchOnly:!0,draggable:".item",group:{name:"it",pull:function(e){let a=e.el.id;return"icon"!==A.item.dataset.type||"footer-itxst"!==a||"clone"},put:!0},onChoose:function(e){A=e,window.MoveData={type:e.item.dataset.type}},onMove:function(e){return!e.dragged.dataset.type&&!e.related.dataset.url||"component"===e.dragged.dataset.type||"iconGroup"!==e.related.dataset.url},onUpdate(e){V()},onAdd(e){V()}},S=h.create(e,a)})),l((()=>{n.off("saveGroup",V)})),(e,a)=>{const t=s("el-input");return i(),r("div",{id:"iconGroupBox",onClick:a[5]||(a[5]=(...e)=>C.reload&&C.reload(...e))},[u("div",{class:"groupName",onClick:a[1]||(a[1]=c((()=>{}),["stop"]))},[p(t,{onBlur:L,modelValue:w.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.name=e)},null,8,["modelValue"])]),u("div",{class:"model",onDragleave:a[3]||(a[3]=e=>{"model"===e.relatedTarget.className&&(O=!0,clearTimeout(E),C.reload())}),onDragenter:a[4]||(a[4]=e=>{"iconGroupBox"===e.relatedTarget.id&&(O=!1)})},[u("div",{id:"iconGroupItem",class:"iconGroupItem itxst",onClick:c(D,["stop"])},[(i(!0),r(m,null,v(x(G)(x(I)),(e=>(i(),f(y,{key:e.id},{default:g((()=>[p(T,{onClick:a[2]||(a[2]=c((()=>{}),["stop"])),data:e,"data-type":null==e?void 0:e.type,"data-id":null==e?void 0:e.id},null,8,["data","data-type","data-id"])])),_:2},1024)))),128))],8,B)],32)])}}};const _={__name:"iconGroupBox",setup(e){const a=t(!1),o=t(),d=e=>{o.value=e,a.value=!0},s=()=>{a.value=!1};return n.on("addGroupBox",d),l((()=>{n.off("addGroupBox",d)})),(e,t)=>(i(),r("div",null,[p(y,{name:"groupBox"},{default:g((()=>[a.value?(i(),f(C,{key:0,data:o.value,reload:s},null,8,["data"])):k("",!0)])),_:1})]))}};export{_ as default};

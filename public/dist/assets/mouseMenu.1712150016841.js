import{r as e,u as t,s,x as n,w as a,E as o,o as l,c as i,d as r,l as u,m as d,e as p,j as c,i as m,v,F as h,f as g,g as f,h as x,t as k,T as y,p as w,$ as C}from"./index.1712150016841.js";import{C as M,a as b}from"./href.1712150016841.js";import"./dialog.1712150016841.js";var X="/dist/assets/del.1712150016841.svg";const G=["onClick"],I=[p("img",{src:"/dist/assets/open.1712150016841.svg",style:{width:"18px",height:"18px",transform:"translateX(-2px)"}},null,-1),p("span",{style:{transform:"translateX(-2px)"}},"新标签打开",-1)],j={key:1,class:"mouseItem"},L=[p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:"/dist/assets/layout.1712150016841.svg"},null,-1),p("span",{style:{transform:"translateX(1px)"}},"布局",-1)],E={key:2,class:"layoutSet"},H=p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:"/dist/assets/send.1712150016841.svg"},null,-1),T=p("span",{style:{transform:"translateX(-2px)"}},"移动至分类",-1),S=p("img",{style:{position:"absolute",right:"2px",width:"25px",height:"25px"},src:"/dist/assets/right.1712150016841.svg",alt:""},null,-1),_=["onClick"],q=[p("img",{src:"/dist/assets/edit.1712150016841.svg",alt:""},null,-1),p("span",{style:{transform:"translateX(1px)"}},"编辑标签",-1)],W=[p("img",{src:"/dist/assets/dock.1712150016841.svg",alt:""},null,-1),p("span",null,"加入任务栏",-1)],$=["onClick"],z=[p("img",{style:{width:"17px",height:"17px",transform:"translateX(-2px)"},src:"/dist/assets/jiesan.1712150016841.svg"},null,-1),p("span",null,"解散文件夹",-1)],P=["onClick"],B=[p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:X},null,-1),p("span",null,"删除卡片",-1)],F=["onClick"],R=[p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:X},null,-1),p("span",{style:{transform:"translateX(-2px)"}},"删除标签",-1)],A={__name:"mouseMenu",setup(X){const A=e(!1),D=e(""),J=e(!1),K=t(),N=e(!1),O=e(""),Q=e(0);let U={},V={},Y=e(1),Z=e(!0);const ee=e(!1),te=s({top:"0px",left:"0px"}),se=n((()=>{let e=K.state.link.filter((e=>"pageGroup"===e.type));return e.unshift({name:"主页",id:""}),e.sort(((e,t)=>{const{sort:s}=e,{sort:n}=t;return s-n}))}));let ne=setTimeout((()=>{}));const ae=e=>{"in"===e?(clearTimeout(ne),(()=>{let e=35*se.value.length+10,t=document.querySelector(".pageGroup").getBoundingClientRect(),s=Math.floor(t.top),n="-5",a="calc(100% + 6px);";e+s>window.innerHeight&&(console.log(window.innerHeight-(e+s)),n=window.innerHeight-(e+s)-5),262+Math.floor(t.left)>window.innerWidth&&(a=-126),document.querySelector(".childrenMenu").style.top=`${n}px`,document.querySelector(".childrenMenu").style.left=`${a}px`})(),A.value=!0):ne=setTimeout((()=>{A.value=!1}),500)};a(N,(e=>{A.value=!1}));const oe=async()=>{if("iconGroup"===V.component)try{await C.confirm("删除文件夹会连带文件夹内部的图标一并删除，是否删除？","删除确认")}catch(e){return}K.commit("delLink",V.id),N.value=!1,(null==U?void 0:U.call)&&(null==U||U.call())},le=()=>{K.state.link.forEach((e=>{e.pid===V.id&&(e.pid="",e.sort=9999,e.pageGroup=V.pageGroup||"")})),K.commit("delLink",V.id),N.value=!1},ie=()=>{let e=V.id;if(K.state.tabbar.find((t=>t.id===e)))return void(N.value=!1);let t=K.getters.find(e);K.state.tabbar.push(t),K.commit("updateTabbar",K.state.tabbar),N.value=!1},re=()=>{M["tab://addicon"]({data:V}),N.value=!1},ue=e=>{V.size=e;const t=K.state.link.find((e=>e.id===V.id));t&&(t.size=e),K.commit("updateLink",K.state.link),N.value=!1},de=()=>{b(V.url,!0),N.value=!1},pe=e=>{te.top=e.top+"px",e.top+220>window.innerHeight&&(te.top=window.innerHeight-230+"px",e.left+=2),te.left=e.left+"px",e.left+140>window.innerWidth&&(te.left=window.innerWidth-150+"px"),V=e.data,U=e,O.value=V.type;const{app:t=0,pid:s=null,custom:n={}}=K.state.link.find((e=>e.id===V.id));if(Q.value=t,"icon"===O.value?(ee.value=!0,1===Q.value&&(ee.value=/^http/.test(V.url))):ee.value=!1,n&&"object"==typeof n){const{userEdit:e=1}=n;Y.value=e}J.value="iconGroup"===V.component,Z.value=!s,N.value=!0},ce=e=>{N.value&&(N.value=!1)};return o.on("mouseMenuClose",ce),window.addEventListener("mousedown",ce),o.on("mousePs",pe),l((()=>{window.removeEventListener("mousedown",ce),o.off("mousePs",pe)})),(e,t)=>N.value?(i(),r("div",{key:0,class:"mouseMenu",style:w(te),onMousedown:t[6]||(t[6]=u((()=>{}),["stop"])),onContextmenu:t[7]||(t[7]=u((()=>{}),["prevent"]))},[ee.value?(i(),r("div",{key:0,class:"mouseItem mhover",onClick:u(de,["stop"])},I,8,G)):d("",!0),"component"===O.value?(i(),r("div",j,L)):d("",!0),"component"===O.value?(i(),r("div",E,[p("div",{onClick:t[0]||(t[0]=e=>ue("2x4"))},"2x4"),p("div",{onClick:t[1]||(t[1]=e=>ue("2x2"))},"2x2"),p("div",{onClick:t[2]||(t[2]=e=>ue("1x1"))},"1x1")])):d("",!0),c(Z)&&c(K).state.config.theme.pageGroup?(i(),r("div",{key:3,class:"mouseItem mhover pageGroup",onMouseover:t[4]||(t[4]=e=>ae("in")),onMouseleave:t[5]||(t[5]=e=>ae("out"))},[H,T,S,m(p("div",{class:"childrenMenu",ref_key:"childrenMenu",ref:D,onMouseover:t[3]||(t[3]=e=>ae("in"))},[(i(!0),r(h,null,g(c(se),(e=>(i(),f(y,{key:e.id},{default:x((()=>[p("div",{onClick:u((t=>(e=>{const t=K.state.link.find((e=>e.id===V.id));t&&(t.pageGroup=e,K.commit("setLink",t)),N.value=!1})(e.id)),["stop"]),class:"mouseItem mhover"},k(e.name),9,_)])),_:2},1024)))),128))],544),[[v,A.value]])],32)):d("",!0),"icon"===O.value&&c(Y)>0?(i(),r("div",{key:4,class:"mouseItem mhover",onClick:re},q)):d("",!0),"icon"===O.value?(i(),r("div",{key:5,class:"mouseItem mhover",onClick:ie},W)):d("",!0),J.value?(i(),r("div",{key:6,class:"mouseItem mhover",onClick:u(le,["stop"])},z,8,$)):d("",!0),"component"===O.value?(i(),r("div",{key:7,class:"mouseItem mhover",onClick:u(oe,["stop"])},B,8,P)):(i(),r("div",{key:8,class:"mouseItem mhover",onClick:u(oe,["stop"])},R,8,F))],36)):d("",!0)}};export{A as default};

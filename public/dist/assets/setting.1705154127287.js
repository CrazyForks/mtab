import{J as e,u as l,r as a,b as t,c as u,d,k as o,h as s,V as m,j as r,S as p,g as n,a9 as c,$ as i,m as v,e as V,a8 as _}from"./index.1705154127287.js";const h={class:"manager-setting bg-white p-4 rounded-lg"},f=V("h2",{class:"mb-4"},"站点信息配置",-1),b=["src"],g=V("h2",{class:"mb-4"},"邮件服务器配置（如使用25端口,需要检查服务器商是否允许25端口）",-1),U=V("h2",{class:"mb-4"},"其他配置",-1),w=V("h2",{class:"mb-4 flex items-center"},[V("img",{width:"22",height:"22",class:"mr-2",src:"/dist/assets/auth.1705154127287.svg",alt:"订阅授权码"}),i(" 高级订阅配置")],-1),y={__name:"setting",setup(V){const y={userid:e.get("user_id"),token:e.get("token","")},k=l(),x=a({logo:"",title:"",email:"",backgroundImage:"",smtp_host:"",smtp_email:"",smtp_password:"",smtp_port:"",assets_host:"",authCode:"",remote_avatar:"",defaultTab:"",recordNumber:"",description:"",authServer:"",customHead:""}),S=e=>{1===e.code&&(x.value.logo=e.data.url)},I=e=>{1===e.code&&(x.value.backgroundImage=e.data.url)},T=e=>{1===e.code&&(x.value.defaultTab=e.data.url)},H=()=>{m({url:"/setting/saveSetting",method:"post",data:{form:x.value}}).then((e=>{_.success(e.msg),1===e.code&&C()}))},C=()=>{m({url:"/setting/getSetting",method:"get"}).then((e=>{1===e.code&&(x.value=e.data)}))};return C(),(e,l)=>{const a=t("el-icon"),m=t("el-upload"),V=t("el-form-item"),_=t("el-input"),C=t("el-button"),A=t("el-card"),N=t("el-form");return u(),d("div",h,[o(N,{modelValue:x.value,"onUpdate:modelValue":l[16]||(l[16]=e=>x.value=e),"label-position":"top"},{default:s((()=>[o(A,null,{default:s((()=>[f,o(V,{label:"站点logo (建议尺寸128x128px)"},{default:s((()=>[o(m,{class:"avatar-uploader","show-file-list":!1,"on-success":S,action:r(p)+r(k).state.site.upload},{default:s((()=>{var e,l;return[(null==(e=x.value)?void 0:e.logo)?(u(),d("img",{key:0,src:null==(l=x.value)?void 0:l.logo,class:"avatar",alt:""},null,8,b)):(u(),n(a,{key:1,class:"avatar-uploader-icon"},{default:s((()=>[o(r(c))])),_:1}))]})),_:1},8,["action"])])),_:1}),o(V,{label:"站点名称"},{default:s((()=>[o(_,{modelValue:x.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value.title=e),placeholder:"站点名称"},null,8,["modelValue"])])),_:1}),o(V,{label:"站点关键字"},{default:s((()=>[o(_,{modelValue:x.value.keywords,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value.keywords=e),placeholder:"站点关键字用,隔开"},null,8,["modelValue"])])),_:1}),o(V,{label:"站点介绍"},{default:s((()=>[o(_,{modelValue:x.value.description,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value.description=e),placeholder:"站点介绍"},null,8,["modelValue"])])),_:1}),o(V,{label:"站点联系邮箱"},{default:s((()=>[o(_,{modelValue:x.value.email,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value.email=e),placeholder:"联系客服邮箱"},null,8,["modelValue"])])),_:1}),o(V,{label:"自定义Head代码"},{default:s((()=>[o(_,{type:"textarea",rows:"5",modelValue:x.value.customHead,"onUpdate:modelValue":l[4]||(l[4]=e=>x.value.customHead=e),placeholder:"请粘贴html文本内容"},null,8,["modelValue"])])),_:1}),o(V,{label:"站点备案信息"},{default:s((()=>[o(_,{modelValue:x.value.recordNumber,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value.recordNumber=e),placeholder:"请输入备案号"},null,8,["modelValue"])])),_:1}),o(V,{label:"默认壁纸"},{default:s((()=>[o(_,{modelValue:x.value.backgroundImage,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value.backgroundImage=e),placeholder:"请设置网站默认壁纸"},{append:s((()=>[o(m,{class:"upload-demo","show-file-list":!1,"on-success":I,action:r(p)+r(k).state.site.upload},{default:s((()=>[o(C,{type:"primary"},{default:s((()=>[i("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(A,{class:"mt-4"},{default:s((()=>[g,o(V,{label:"SMTP HOST"},{default:s((()=>[o(_,{type:"text",modelValue:x.value.smtp_host,"onUpdate:modelValue":l[7]||(l[7]=e=>x.value.smtp_host=e),placeholder:"邮件服务器地址"},null,8,["modelValue"])])),_:1}),o(V,{label:"邮箱账号"},{default:s((()=>[o(_,{modelValue:x.value.smtp_email,"onUpdate:modelValue":l[8]||(l[8]=e=>x.value.smtp_email=e),placeholder:"发件人邮箱"},null,8,["modelValue"])])),_:1}),o(V,{label:"邮箱授权码/密码"},{default:s((()=>[o(_,{type:"password","show-password":"",modelValue:x.value.smtp_password,"onUpdate:modelValue":l[9]||(l[9]=e=>x.value.smtp_password=e),placeholder:"授权码/密码"},null,8,["modelValue"])])),_:1}),o(V,{label:"发件端口"},{default:s((()=>[o(_,{modelValue:x.value.smtp_port,"onUpdate:modelValue":l[10]||(l[10]=e=>x.value.smtp_port=e),placeholder:"25/109/110/143/465/995/993/994"},null,8,["modelValue"])])),_:1})])),_:1}),o(A,{class:"mt-4"},{default:s((()=>[U,r(false)?(u(),n(V,{key:0,label:"资源cdn域名"},{default:s((()=>[o(_,{modelValue:x.value.assets_host,"onUpdate:modelValue":l[11]||(l[11]=e=>x.value.assets_host=e),placeholder:"文件cdn域名,一般留空即可!"},null,8,["modelValue"])])),_:1})):v("",!0),o(V,{label:"头像生成API（自建请修改API地址）"},{default:s((()=>[o(_,{modelValue:x.value.remote_avatar,"onUpdate:modelValue":l[12]||(l[12]=e=>x.value.remote_avatar=e),placeholder:"https://avatar.mtab.cc/6.x/thumbs/png?seed="},null,8,["modelValue"])])),_:1}),o(V,{label:"默认主页标签（请前往首页设置好然后将导出的文件上传至此）"},{default:s((()=>[o(_,{modelValue:x.value.defaultTab,"onUpdate:modelValue":l[13]||(l[13]=e=>x.value.defaultTab=e),placeholder:"设置->导出图标"},{append:s((()=>[o(m,{class:"upload-demo","show-file-list":!1,"on-success":T,headers:y,action:r(p)+"/api/AdminUpload"},{default:s((()=>[o(C,{type:"primary"},{default:s((()=>[i("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(A,{class:"mt-4"},{default:s((()=>[w,o(V,{label:"授权码配置"},{default:s((()=>[o(_,{modelValue:x.value.authCode,"onUpdate:modelValue":l[14]||(l[14]=e=>x.value.authCode=e),placeholder:"请输入授权码"},null,8,["modelValue"])])),_:1}),r(false)?(u(),n(V,{key:0,label:"授权服务器"},{default:s((()=>[o(_,{modelValue:x.value.authServer,"onUpdate:modelValue":l[15]||(l[15]=e=>x.value.authServer=e),placeholder:"一般留空即可!默认无需填写"},null,8,["modelValue"])])),_:1})):v("",!0)])),_:1}),o(C,{size:"large",class:"mt-4 w-full",type:"primary",onClick:H},{default:s((()=>[i("保存配置文件")])),_:1})])),_:1},8,["modelValue"])])}}};export{y as default};

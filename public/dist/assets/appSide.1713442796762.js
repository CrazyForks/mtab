import{u as e,r as s,w as a,z as l,J as o,o as t,b as n,c as i,d as r,k as u,h as d,e as c,j as p,a0 as m,q as v,G as g,x as h,i as _,E as w,a1 as f,m as k,T as x,Z as b,$ as y,N as L,a2 as C,a3 as V,P as j,Q as E,R as P,g as S,S as O,a4 as U}from"./index.1713442796762.js";var q="/dist/assets/qq_symbol.1713442796762.png";const B={class:"userLogin"},I={key:0,class:"loginPage"},T={class:"loginCard"},A={class:"rightLogin"},R={class:"text-lg font-bold mb-6 flex items-center"},z=["src"],D={key:0,class:"mt-3 login"},Q={class:"input_div"},K=c("div",{class:"input_title"}," 邮箱账号 ",-1),M=c("div",{class:"input_title mt-3"}," 登录密码 ",-1),G=["onKeyup"],$={class:"flex mt-4"},H=c("hr",{class:"mt-6 mb-6 hr-login"},null,-1),F={class:"flex"},J={class:"other_login"},N=[c("img",{src:q,style:{height:"40px"}},null,-1)],W={key:1,class:"mt-3 register"},Z={class:"input_div"},X=c("div",{class:"input_title"}," 邮箱账号 ",-1),Y=c("div",{class:"input_title mt-3"}," 注册密码 ",-1),ee=["onKeyup"],se=c("div",{class:"input_title mt-3"}," 验证码 ",-1),ae={class:"flex gap-4"},le={key:1,class:"SmsCodeButton"},oe={class:"flex mt-4"},te=c("hr",{class:"mt-6 mb-6 hr-login"},null,-1),ne={class:"flex"},ie={key:2,class:"mt-3 register"},re={class:"input_div"},ue=c("div",{class:"input_title"}," 邮箱账号 ",-1),de=c("div",{class:"input_title mt-3"}," 新密码 ",-1),ce=c("div",{class:"input_title mt-3"}," 邮件验证码 ",-1),pe={class:"flex gap-4"},me={key:1,class:"SmsCodeButton"},ve={class:"flex mt-4"},ge=c("hr",{class:"mt-6 mb-6 hr-login"},null,-1),he={class:"flex"},_e={__name:"userLogin",setup(j){const E=e(),P=s(1),S=s(60),O=s(!1);a(O,(e=>{document.body.style.overflow=e?"hidden":"scroll"}));const U=()=>{O.value=!1},q=l({username:"",password:""}),_e=l({username:"",password:"",code:""}),we=l({username:"",password:"",code:""}),fe=()=>{b({url:"/user/forgetPass",method:"post",data:{username:we.username,password:we.password,code:we.code}}).then((e=>{1===e.code?(q.username=we.username,q.password=we.password,y.success("重置成功,已为您自动登录"),xe()):y.error(e.msg)}))},ke=()=>{b({url:"/user/register",method:"post",data:{username:_e.username,password:_e.password,code:_e.code}}).then((e=>{1===e.code?(q.username=_e.username,q.password=_e.password,y.success("注册完成,已为您自动登录！"),xe()):y.error(e.msg)}))},xe=()=>{b({url:"/user/login",method:"post",data:{username:q.username,password:q.password}}).then((e=>{if(1===e.code){const{user_id:s,token:a}=e.data;L.set("token",a).set("user_id",s),y.success("登录成功! 即将刷新状态"),O.value=!1,C(),setTimeout((()=>{location.reload()}),1e3)}else y.error(e.msg)}))},be=()=>{O.value=!1;const e=window.innerWidth/2-350,s=window.innerHeight/2-225;window.open(V+"/User/qLogin","QQ登录",`width=700,height=450,left=${e}px,top=${s}px,menubar=0,scrollbars=1,resizable=1,status=1,titlebar=0,toolbar=0,location=1`)};window.userLogin=function(e){console.log(e)};const ye=e=>{b({url:"/api/getMailCode",method:"post",data:{mail:e}}).then((e=>{if(1===e.code){y.success(e.msg);let s=setInterval((()=>{S.value-=1,S.value<=0&&(clearInterval(s),S.value=60)}),1e3)}else y.error(e.msg)}))},Le=(e=1)=>{P.value=e,O.value=!0};return o.on("openLogin",Le),t((()=>{o.off("openLogin",Le)})),(e,s)=>{const a=n("el-icon");return i(),r("div",B,[u(x,{name:"loginFade"},{default:d((()=>{var e;return[O.value?(i(),r("div",I,[c("div",T,[c("div",A,[u(a,{onClick:U,size:"25px",class:"closeLogin"},{default:d((()=>[u(p(m))])),_:1}),c("h2",R,[c("img",{class:"loginIco",src:p(v)("/favicon"),alt:""},null,8,z),g(" "+h(["登录","注册","重置"][P.value-1])+"您的账户 ",1)]),1===P.value?(i(),r("div",D,[c("div",Q,[K,_(c("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>q.username=e),class:"inputLogin",placeholder:"请输入邮箱"},null,512),[[w,q.username]]),M,_(c("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>q.password=e),placeholder:"请输入6-18位密码",class:"inputLogin",onKeyup:f(xe,["enter"])},null,40,G),[[w,q.password]])]),c("div",$,[c("span",{class:"hover text-blue-500 ml-auto text-sm",onClick:s[2]||(s[2]=e=>P.value=3)},"忘记密码？")]),c("div",{class:"mt-4 flex"},[c("button",{class:"loginBtn",onClick:xe}," 登录 ")]),H,c("div",F,[c("div",{class:"text-gray-500 text-sm m-auto cursor-pointer",onClick:s[3]||(s[3]=e=>P.value=2)},"还没有账号？去注册")]),c("div",J,["1"===(null==(e=p(E).state.site)?void 0:e.qq_login)?(i(),r("button",{key:0,class:"qq_login",onClick:be,title:"QQ登录"},N)):k("",!0)])])):k("",!0),2===P.value?(i(),r("div",W,[c("div",Z,[X,_(c("input",{class:"inputLogin","onUpdate:modelValue":s[4]||(s[4]=e=>_e.username=e),placeholder:"请输入邮箱"},null,512),[[w,_e.username]]),Y,_(c("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>_e.password=e),placeholder:"请输入6-18位密码",class:"inputLogin",type:"password",onKeyup:f(xe,["enter"])},null,40,ee),[[w,_e.password]]),se,c("div",ae,[_(c("input",{type:"number",class:"inputLogin","onUpdate:modelValue":s[6]||(s[6]=e=>_e.code=e),placeholder:"请输入验证码"},null,512),[[w,_e.code]]),60===S.value?(i(),r("button",{key:0,class:"SmsCodeButton",onClickOnce:s[7]||(s[7]=e=>ye(_e.username))},"获取 ",32)):(i(),r("button",le,h(S.value)+"s",1))])]),c("div",oe,[c("span",{class:"hover text-blue-500 ml-auto text-sm",onClick:s[8]||(s[8]=e=>P.value=1)},"已有账号？去登录")]),c("div",{class:"mt-4 flex"},[c("button",{class:"loginBtn",onClick:ke}," 提交注册 ")]),te,c("div",ne,[c("div",{class:"text-gray-500 text-sm m-auto cursor-pointer",onClick:s[9]||(s[9]=e=>P.value=3)},"忘记密码？去找回")])])):k("",!0),3===P.value?(i(),r("div",ie,[c("div",re,[ue,_(c("input",{class:"inputLogin","onUpdate:modelValue":s[10]||(s[10]=e=>we.username=e),placeholder:"请输入邮箱"},null,512),[[w,we.username]]),de,_(c("input",{"onUpdate:modelValue":s[11]||(s[11]=e=>we.password=e),placeholder:"请输入6-18位密码",type:"password",class:"inputLogin"},null,512),[[w,we.password]]),ce,c("div",pe,[_(c("input",{type:"number",class:"inputLogin","onUpdate:modelValue":s[12]||(s[12]=e=>we.code=e),placeholder:"请输入验证码"},null,512),[[w,we.code]]),60===S.value?(i(),r("button",{key:0,class:"SmsCodeButton",onClickOnce:s[13]||(s[13]=e=>ye(we.username))},"获取 ",32)):(i(),r("button",me,h(S.value)+"s",1))])]),c("div",ve,[c("span",{class:"hover text-blue-500 ml-auto text-sm",onClick:s[14]||(s[14]=e=>P.value=1)},"已有账号？去登录")]),c("div",{class:"mt-4 flex"},[c("button",{class:"loginBtn",onClick:fe}," 提交 ")]),ge,c("div",he,[c("div",{class:"text-gray-500 text-sm m-auto cursor-pointer",onClick:s[15]||(s[15]=e=>P.value=2)},"还没有账号？去注册")])])):k("",!0)])])])):k("",!0)]})),_:1})])}}},we={iconGroup:j((()=>E((()=>import("./iconGroup.1713442796762.js")),["assets/iconGroup.1713442796762.js","assets/iconGroup.1713442796762.css","assets/index.1713442796762.js","assets/index.17134427967625.css","assets/jquery.1713442796762.js"]))),addicon:j((()=>E((()=>import("./addicon.1713442796762.js")),["assets/addicon.1713442796762.js","assets/addicon.1713442796762.css","assets/index.1713442796762.js","assets/index.17134427967625.css"]))),addSearchEngine:j((()=>E((()=>import("./addSearchEngine.1713442796762.js")),["assets/addSearchEngine.1713442796762.js","assets/addSearchEngine.1713442796762.css","assets/index.1713442796762.js","assets/index.17134427967625.css","assets/net.1713442796762.js"]))),background:j((()=>E((()=>import("./index.17134427967625.js")),["assets/index.17134427967625.js","assets/index.17134427967623.css","assets/index.1713442796762.js","assets/index.17134427967625.css"]))),note:j((()=>E((()=>import("./note.1713442796762.js")),["assets/note.1713442796762.js","assets/note.1713442796762.css","assets/index.1713442796762.js","assets/index.17134427967625.css"])))};const fe={key:0,class:"framer"},ke=[c("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M8 8L40 40",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M8 40L40 8",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1)],xe={class:"componentView"},be={__name:"framer",setup(e){const a=s(!1),l=s({}),m=s(null);let v={width:"1000px",height:"500px",top:"15vh"};const g=s(Object.assign({},v)),h=P(we.note),_=e=>{const{size:s=!1}=e;if(s){g.value.width=s.width,g.value.height=s.height;const{top:e="15vh"}=s;g.value.top=e}else g.value=Object.assign({},v);U("--frameHeight",g.value.height),h.value=we[e.component];const{data:o={}}=e;l.value=o,a.value=!0},w=()=>{a.value=!1},f=e=>{a.value=!1,e()};return o.on("openPlugin",_),o.on("closePlugin",w),t((()=>{o.off("openPlugin",_),o.off("closePlugin",w)})),(e,s)=>{const o=n("el-dialog");return a.value?(i(),r("div",fe,[u(o,{modal:!1,modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:g.value.width,"before-close":f,class:"framerAlert",top:g.value.top,ref_key:"framers",ref:m,draggable:""},{header:d((()=>[c("div",{class:"flex justify-end"},[c("div",{class:"cursor-pointer windowController windowclose",onClick:w,title:"关闭窗口"},ke)])])),default:d((()=>[c("div",xe,[(i(),S(O(p(h)),{data:l.value,onClose:w},null,40,["data"]))])])),_:1},8,["modelValue","width","top"])])):k("",!0)}}},ye={class:"appSide"},Le={__name:"appSide",setup:e=>(e,s)=>(i(),r("div",ye,[u(_e),u(be)]))};var Ce=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"}));export{Le as _,q as a,Ce as b};

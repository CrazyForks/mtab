import{ah as e,u as l,r as a,b as t,c as o,d as s,k as u,h as d,j as n,a3 as i,g as m,D as c,m as r,G as p,e as v,Z as g,H as h,$ as f,i as _,v as x,ai as b,x as y,R as V,F as w,f as A,S as k,n as S,T as U}from"./index.1713442796762.js";import{_ as z}from"./wangEditor.1713442796762.js";const C=v("h2",{class:"mb-4"},"站点信息配置",-1),M=["src"],R=v("h2",{class:"mb-4"},"关于我们 （前端设置关于我们的地方展示以及其他可能需要的地方展示）",-1),E=v("h2",{class:"mb-4"},"其他配置",-1),G={class:"flex"},D={__name:"base",setup(f){e("user_id"),e("token");const _=l(),x=a({logo:"",title:"",email:"",backgroundImage:"",assets_host:"",remote_avatar:"",keywords:"",defaultTab:"",description:"",customHead:"",qqGroup:"",pwa:"0",touristUpload:"1",theme_color:"#141414"}),b=e=>{1===e.code&&(x.value.logo=e.data.url)},y=async()=>{const e=await g({url:"/setting/refreshCache"});h.success(e.msg)},V=()=>{g({url:"/Setting/saveSetting",method:"post",data:{form:x.value}}).then((e=>{h.success(e.msg),1===e.code&&w()}))},w=()=>{g({url:"/Setting/getSetting",method:"post",data:{role:["logo","title","email","keywords","backgroundImage","assets_host","remote_avatar","defaultTab","recordNumber","description","customHead","qqGroup","touristUpload","pwa","theme_color"]}}).then((e=>{1===e.code&&Object.assign(x.value,e.data)}))};return w(),(e,l)=>{const a=t("el-icon"),g=t("el-upload"),h=t("el-form-item"),f=t("el-input"),w=t("el-card"),A=t("el-option"),k=t("el-select"),S=t("el-color-picker"),U=t("el-button"),z=t("el-form");return o(),s("div",null,[u(z,{modelValue:x.value,"onUpdate:modelValue":l[11]||(l[11]=e=>x.value=e),"label-position":"top"},{default:d((()=>[u(w,null,{default:d((()=>[C,u(h,{label:"站点logo (建议尺寸严格设置为144x144px) 后续PWA等其他场景可能会用到"},{default:d((()=>[u(g,{class:"avatar-uploader","show-file-list":!1,"on-success":b,action:n(i)+n(_).state.site.upload},{default:d((()=>{var e,l;return[(null==(e=x.value)?void 0:e.logo)?(o(),s("img",{key:0,src:null==(l=x.value)?void 0:l.logo,class:"avatar",alt:""},null,8,M)):(o(),m(a,{key:1,class:"avatar-uploader-icon"},{default:d((()=>[u(n(c))])),_:1}))]})),_:1},8,["action"])])),_:1}),u(h,{label:"站点名称"},{default:d((()=>[u(f,{modelValue:x.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value.title=e),placeholder:"站点名称"},null,8,["modelValue"])])),_:1}),u(h,{label:"站点关键字"},{default:d((()=>[u(f,{modelValue:x.value.keywords,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value.keywords=e),placeholder:"站点关键字用,隔开"},null,8,["modelValue"])])),_:1}),u(h,{label:"站点介绍"},{default:d((()=>[u(f,{modelValue:x.value.description,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value.description=e),placeholder:"站点介绍"},null,8,["modelValue"])])),_:1}),u(h,{label:"自定义Head代码"},{default:d((()=>[u(f,{type:"textarea",rows:"5",modelValue:x.value.customHead,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value.customHead=e),placeholder:"请粘贴html文本内容"},null,8,["modelValue"])])),_:1})])),_:1}),u(w,{class:"mt-4"},{default:d((()=>[R,u(h,{label:"站点联系邮箱"},{default:d((()=>[u(f,{modelValue:x.value.email,"onUpdate:modelValue":l[4]||(l[4]=e=>x.value.email=e),placeholder:"联系客服邮箱"},null,8,["modelValue"])])),_:1}),u(h,{label:"QQ交流群"},{default:d((()=>[u(f,{modelValue:x.value.qqGroup,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value.qqGroup=e),placeholder:"请输入QQ交流群号"},null,8,["modelValue"])])),_:1})])),_:1}),u(w,{class:"mt-4"},{default:d((()=>[E,n(false)?(o(),m(h,{key:0,label:"资源cdn域名"},{default:d((()=>[u(f,{modelValue:x.value.assets_host,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value.assets_host=e),placeholder:"文件cdn域名,一般留空即可!"},null,8,["modelValue"])])),_:1})):r("",!0),u(h,{label:"标签LOGO生成API（自建请修改API地址）"},{default:d((()=>[u(f,{modelValue:x.value.remote_avatar,"onUpdate:modelValue":l[7]||(l[7]=e=>x.value.remote_avatar=e),placeholder:"https://avatar.mtab.cc/6.x/thumbs/png?seed="},null,8,["modelValue"])])),_:1}),u(h,{label:"是否允许游客上传文件"},{default:d((()=>[u(k,{class:"w-full",modelValue:x.value.touristUpload,"onUpdate:modelValue":l[8]||(l[8]=e=>x.value.touristUpload=e)},{default:d((()=>[u(A,{label:"不允许",value:"0"},{default:d((()=>[p("不允许")])),_:1}),u(A,{label:"允许",value:"1"},{default:d((()=>[p("允许")])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(h,{label:"开启网站PWA （在开启前请确保您已知晓PWA的功能和用途，如不了解请不要开启，不开启也不影响使用。关闭后已安装的用户不会受到影响，需要手动卸载！）"},{default:d((()=>[u(k,{class:"w-full",modelValue:x.value.pwa,"onUpdate:modelValue":l[9]||(l[9]=e=>x.value.pwa=e)},{default:d((()=>[u(A,{label:"停用PWA",value:"0"},{default:d((()=>[p("停用PWA")])),_:1}),u(A,{label:"启用PWA",value:"1"},{default:d((()=>[p("启用PWA")])),_:1})])),_:1},8,["modelValue"])])),_:1}),"1"==x.value.pwa?(o(),m(h,{key:1,label:"PWA窗口主题颜色(修改后针对已安装的用户不会立即生效，浏览器会一般24小时左右才会更新，望须知！)"},{default:d((()=>[u(S,{modelValue:x.value.theme_color,"onUpdate:modelValue":l[10]||(l[10]=e=>x.value.theme_color=e)},null,8,["modelValue"])])),_:1})):r("",!0)])),_:1}),v("div",G,[u(U,{size:"large",class:"mt-4 w-full",type:"primary",onClick:V},{default:d((()=>[p("保存配置文件")])),_:1}),u(U,{size:"large",class:"mt-4 w-40",type:"danger",onClick:y},{default:d((()=>[p("刷新配置文件缓存")])),_:1})])])),_:1},8,["modelValue"])])}}},N={class:"flex flex-col",style:{height:"calc(100vh - 100px)"}},Q={class:"mt-4"},I=v("div",{class:"text-base text-gray-700 mb-2"},"公告标题（非必填）",-1),W={class:"mt-4"},T=v("div",{class:"text-base text-gray-700 mb-2"},[p("请选择公告的状态 "),v("b",{class:"text-red-500"},"*")],-1),q={class:"mt-6 flex"},O={__name:"notify",setup(e){const l=a(""),n=a(""),i=a("0"),m=()=>{f({customClass:"globalNotify",dangerouslyUseHTMLString:!0,title:n.value,message:l.value,duration:3e4})},c=async()=>{const e=await g({url:"/Setting/saveSetting",method:"post",data:{form:{globalNotify:JSON.stringify({html:l.value,title:n.value,status:i.value})}}});1===e.code?h.success(e.msg):h.warning(e.msg)};return g({url:"/Setting/getSetting",method:"post",data:{role:["globalNotify"]}}).then((e=>{if(1===e.code){const{globalNotify:t=!1}=e.data;if(t)try{let e=JSON.parse(t);const{html:a="",title:o="",status:s=0}=e;l.value=a,n.value=o,i.value=s}catch(a){console.log(a)}}})),(e,a)=>{const r=t("el-input"),g=t("el-option"),h=t("el-select"),f=t("el-button");return o(),s("div",N,[u(z,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e)},null,8,["modelValue"]),v("div",Q,[I,u(r,{clearable:"",size:"large",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e),placeholder:"请设置一个标题吧！不是必须设置项，不设置则不展示标题。"},null,8,["modelValue"])]),v("div",W,[T,u(h,{placeholder:"请选择公告的状态",modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),size:"large"},{default:d((()=>[u(g,{value:"0",label:"隐藏"}),u(g,{value:"1",label:"展示"})])),_:1},8,["modelValue"])]),v("div",q,[u(f,{class:"w-full",size:"large",onClick:c,type:"primary"},{default:d((()=>[p("保存公告")])),_:1}),u(f,{class:"w-60",size:"large",onClick:m,type:"success"},{default:d((()=>[p("预览公告")])),_:1})])])}}};const Z=v("h2",{class:"mb-4 flex gap-2 items-center"},[v("img",{style:{width:"20px",height:"20px"},src:"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRFRDAzMDFGQTRERjExRTdBOERFRDM3QzM0QkNFNDU4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRFRDAzMDIwQTRERjExRTdBOERFRDM3QzM0QkNFNDU4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REVEMDMwMURBNERGMTFFN0E4REVEMzdDMzRCQ0U0NTgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REVEMDMwMUVBNERGMTFFN0E4REVEMzdDMzRCQ0U0NTgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7byXusAAAK8ElEQVR42uRXeXAUVRr/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"}),p("ICP备案信息")],-1),L=v("h2",{class:"mb-4 flex gap-2 items-center"},[v("img",{style:{width:"20px",height:"20px"},src:"/dist/assets/gonganbeian.1713442796762.ico"}),p("公安备案信息")],-1),F={class:"mb-4 flex gap-2 items-center"},P={style:{width:"25px",height:"25px"},t:"1709128256898",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8037",width:"128",height:"128"},J=[v("path",{d:"M871.7 762.53l-86.62 17.86a48.26 48.26 0 0 0-31.35 22l-46.41 75.29a24.78 24.78 0 0 1-41.4 1.21L513.54 661.22a24.78 24.78 0 0 1 6.09-34.52L700.1 500.33a24.78 24.78 0 0 1 34.52 6.08L887 724a24.79 24.79 0 0 1-15.3 38.53z",fill:"#3AAF09","p-id":"8038"},null,-1),v("path",{d:"M154.59 762.53l86.62 17.86a48.26 48.26 0 0 1 31.35 22L319 877.63a24.79 24.79 0 0 0 41.41 1.21l152.34-217.62a24.78 24.78 0 0 0-6.08-34.52L326.19 500.33a24.78 24.78 0 0 0-34.52 6.08L139.29 724a24.79 24.79 0 0 0 15.3 38.53z",fill:"#3AAF09","p-id":"8039"},null,-1),v("path",{d:"M513.25 425.25m-317.35 0a317.35 317.35 0 1 0 634.7 0 317.35 317.35 0 1 0-634.7 0Z",fill:"#24D316","p-id":"8040"},null,-1),v("path",{d:"M526.94 634.27c-129.09 0-231.08-118.23-203.39-252.09 16.18-78.18 76.38-140.46 154.26-158.24 67.95-15.51 135.15 1.75 185 44.91a14.3 14.3 0 0 1 0.68 20.9l-29.34 29.35a14.32 14.32 0 0 1-19.26 0.89A138 138 0 0 0 389.07 431.4c2.69 73.72 63.5 132.87 137.87 132.87a136.9 136.9 0 0 0 88-31.69 14.28 14.28 0 0 1 19.22 0.94l29.34 29.34a14.32 14.32 0 0 1-0.76 21 206.42 206.42 0 0 1-135.8 50.41z",fill:"#E1FFC7","p-id":"8041"},null,-1)],Y={class:"flex"},B={__name:"copyright",setup(e){const l=a({recordNumber:"",copyright:"",beianMps:""}),n=async()=>{const e=await g({url:"/setting/refreshCache"});h.success(e.msg)},i=()=>{g({url:"/Setting/saveSetting",method:"post",data:{form:l.value}}).then((e=>{h.success(e.msg),1===e.code&&m()}))},m=()=>{g({url:"/Setting/getSetting",method:"post",data:{role:["recordNumber","copyright","beianMps"]}}).then((e=>{1===e.code&&(l.value=Object.assign(l.value,e.data))}))};return m(),(e,a)=>{const m=t("el-input"),c=t("el-form-item"),r=t("el-card"),g=t("el-button"),h=t("el-form");return o(),s("div",null,[u(h,{modelValue:l.value,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value=e),"label-position":"top"},{default:d((()=>[u(r,{class:"mt-4"},{default:d((()=>[Z,u(c,{label:"站点ICP备案信息"},{default:d((()=>[u(m,{modelValue:l.value.recordNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.recordNumber=e),placeholder:"请输入备案号"},null,8,["modelValue"])])),_:1})])),_:1}),u(r,{class:"mt-4"},{default:d((()=>[L,u(c,{label:"站点公安备案信息"},{default:d((()=>[u(m,{modelValue:l.value.beianMps,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.beianMps=e),placeholder:"请输入备案号"},null,8,["modelValue"])])),_:1})])),_:1}),u(r,{class:"mt-4"},{default:d((()=>[v("h2",F,[v("div",null,[(o(),s("svg",P,J))]),p(" 站点版权信息 ")]),u(c,{label:"请输入站点版权信息"},{default:d((()=>[u(m,{modelValue:l.value.copyright,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.copyright=e),placeholder:"请输入文字或者富文本内容，请勿插入js脚本等"},null,8,["modelValue"])])),_:1})])),_:1}),v("div",Y,[u(g,{size:"large",class:"mt-4 w-full",type:"primary",onClick:i},{default:d((()=>[p("保存配置文件")])),_:1}),u(g,{size:"large",class:"mt-4 w-40",type:"danger",onClick:n},{default:d((()=>[p("刷新配置文件缓存")])),_:1})])])),_:1},8,["modelValue"])])}}};const X={class:"mb-4 flex items-center"},H=v("img",{width:"22",height:"22",class:"mr-2",src:"/dist/assets/auth.1713442796762.svg",alt:"订阅授权码"},null,-1),j={key:0,href:"https://mtab.cc/pricing.html",target:"_blank",class:"text-xs p-1 px-4 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-xl ml-8 text-white"},K=v("div",{class:"mt-2 text-red-500 text-sm"},"* 使用问题或授权问题可以在官网添加客服或者QQ群。QQ群号：694155153",-1),$={class:"flex"},ee={__name:"auth",setup(i){e("user_id"),e("token");l();const c=a({authCode:"",authServer:""}),f=async()=>{const e=await g({url:"/setting/refreshCache"});h.success(e.msg)},_=async()=>{g({url:"/Setting/saveSetting",method:"post",data:{form:c.value}}).then((e=>{h.success(e.msg),1===e.code&&x()}))},x=()=>{g({url:"/Setting/getSetting",method:"post",data:{role:["authCode","authServer"]}}).then((e=>{1===e.code&&Object.assign(c.value,e.data)}))};return x(),(e,l)=>{const a=t("el-input"),i=t("el-form-item"),g=t("el-card"),h=t("el-button"),x=t("el-form");return o(),s("div",null,[u(x,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value=e),"label-position":"top"},{default:d((()=>[u(g,{class:"mt-4"},{default:d((()=>[v("h2",X,[H,p(" 高级订阅配置 "),c.value.authCode?r("",!0):(o(),s("a",j,"获取订阅授权解锁更多功能"))]),u(i,{label:"授权码配置"},{default:d((()=>[u(a,{modelValue:c.value.authCode,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value.authCode=e),placeholder:"请输入授权码"},null,8,["modelValue"]),K])),_:1}),n(false)?(o(),m(i,{key:0,label:"授权服务器"},{default:d((()=>[u(a,{modelValue:c.value.authServer,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value.authServer=e),placeholder:"一般留空即可!默认无需填写"},null,8,["modelValue"])])),_:1})):r("",!0)])),_:1}),v("div",$,[u(h,{size:"large",class:"mt-4 w-full",type:"primary",onClick:_},{default:d((()=>[p("验证并保存")])),_:1}),u(h,{size:"large",class:"mt-4 w-40",type:"danger",onClick:f},{default:d((()=>[p("刷新配置文件缓存")])),_:1})])])),_:1},8,["modelValue"])])}}};const le=v("h2",{class:"mb-4"},"邮件服务器配置（如使用25端口,需要检查服务器商是否允许25端口）",-1),ae=v("div",{class:"text-red-500 text-sm"},"* 需要在您的邮箱设置里开启smtp功能才可以发送邮件，然后查看smtp的服务器地址",-1),te=v("div",{class:"text-red-500 text-sm"},"* 开启smtp的邮箱账号",-1),oe=v("div",{class:"text-red-500 text-sm"},"* 有些邮箱的smtp需要使用单独提供的授权码，不能使用密码。请根据所使用邮箱的smtp相关文档填写 ",-1),se=v("div",{class:"text-red-500 text-sm"},"* 由于安全需要，主流服务器厂商都直接屏蔽了25端口，所以请选择使用465端口",-1),ue={class:"flex gap-4 w-full"},de=v("div",{style:{position:"absolute",right:"15px",width:"max-content",top:"-35px"}},[v("span",{style:{"font-size":"13px",color:"#dd4a68","margin-right":"50px"}},"内置常量 验证码：{$code}      发送时间：{$time}"),v("span",null,"模板效果预览")],-1),ne=["innerHTML"],ie=v("div",{class:"text-red-500 text-sm"},"* 使用smtp请务必配置好您的站点信息（站点名称），否则无法发送邮件。 ",-1),me={class:"flex"},ce={__name:"smtp",setup(n){e("user_id"),e("token"),l();const i=a({smtp_host:"",smtp_email:"",smtp_password:"",smtp_port:"",smtp_code_template:""}),m=async()=>{const e=await g({url:"/setting/refreshCache"});h.success(e.msg)},c=e=>{let l=e.replace("{$code}","123456");return l=l.replace("{$time}","1997-01-01 00:00:00"),l},r=()=>{g({url:"/Setting/saveSetting",method:"post",data:{form:i.value}}).then((e=>{h.success(e.msg),1===e.code&&f()}))},f=()=>{g({url:"/Setting/getSetting",method:"post",data:{role:["smtp_host","smtp_email","smtp_password","smtp_port","smtp_code_template"]}}).then((e=>{1===e.code&&Object.assign(i.value,e.data)}))};return f(),(e,l)=>{const a=t("el-input"),n=t("el-form-item"),g=t("el-card"),h=t("el-button"),f=t("el-form");return o(),s("div",null,[u(f,{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=e=>i.value=e),"label-position":"top"},{default:d((()=>[u(g,{class:"mt-4"},{default:d((()=>[le,u(n,{label:"SMTP HOST"},{default:d((()=>[u(a,{type:"text",modelValue:i.value.smtp_host,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value.smtp_host=e),placeholder:"邮件服务器地址"},null,8,["modelValue"]),ae])),_:1}),u(n,{label:"邮箱账号"},{default:d((()=>[u(a,{modelValue:i.value.smtp_email,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value.smtp_email=e),placeholder:"发件人邮箱"},null,8,["modelValue"]),te])),_:1}),u(n,{label:"邮箱授权码/密码"},{default:d((()=>[u(a,{type:"password","show-password":"",modelValue:i.value.smtp_password,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value.smtp_password=e),placeholder:"授权码/密码"},null,8,["modelValue"]),oe])),_:1}),u(n,{label:"发件端口"},{default:d((()=>[u(a,{modelValue:i.value.smtp_port,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value.smtp_port=e),placeholder:"25/109/110/143/465/995/993/994"},null,8,["modelValue"]),se])),_:1}),u(n,{label:"验证码邮件模板"},{default:d((()=>[v("div",ue,[u(a,{type:"textarea",rows:"14",modelValue:i.value.smtp_code_template,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value.smtp_code_template=e),placeholder:"请输入模板文字或者粘贴设计好的富文本html代码   不设置的话程序则使用默认的邮件模板"},null,8,["modelValue"]),de,v("div",{class:"border w-3/5 p-2",style:{"border-radius":"6px"},innerHTML:c(i.value.smtp_code_template)},null,8,ne)])])),_:1}),ie])),_:1}),v("div",me,[u(h,{size:"large",class:"mt-4 w-full",type:"primary",onClick:r},{default:d((()=>[p("保存配置文件")])),_:1}),u(h,{size:"large",class:"mt-4 w-40",type:"danger",onClick:m},{default:d((()=>[p("刷新配置文件缓存")])),_:1})])])),_:1},8,["modelValue"])])}}};const re={class:"relative pb-0.5",style:{"min-height":"calc(100vh - 95px)"}},pe={key:0,class:"absolute w-full flex-col flex justify-center items-center h-full bg-black z-20 bg-opacity-50 rounded-lg"},ve=[v("div",{class:"text-4xl font-bold text-white"}," 此功能属于高级版本请获取授权后使用 ",-1),v("a",{href:"https://mtab.cc/pricing.html",target:"_blank",class:"mt-6 text-xs p-2 px-6 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full ml-8 text-white"},"获取订阅授权解锁更多功能",-1)],ge=v("h2",{class:"mb-4"},"QQ互联登录配置",-1),he=v("div",{class:"text-sm text-emerald-600"},"QQ互联审核时请务必开启，并填写下方内容，否则无法通过",-1),fe=v("div",{class:"text-sm text-emerald-600"},"申请QQ互联的登录回调地址,请将该地址复制粘贴到QQ互联的登录回调地址中; ",-1),_e=v("div",{class:"text-blue-500"},"QQ互联申请的网站网址：https://connect.qq.com/",-1),xe=v("div",{class:"text-blue-500"},"腾讯应用开放平台认证网址：https://connect.qq.com/",-1),be=v("div",{class:"text-blue-500 text-sm mt-2"},[p("个人主体可能第一次需要在QQ互联注册完提交认证后紧接着去腾讯应用开放平台做一个 "),v("b",null,"人脸识别"),p("，然后补充信息，"),v("b",null,"不需要绑定银行卡"),p("，识别完成后续"),v("u",null,"全在QQ互联操作，创建网站，填写信息即可带等审核，审核期间请务必开启QQ登录，并且把审核的应用的appid和appkey填写在后台，不然审核不过去")],-1),ye={class:"flex"},Ve={__name:"oAuth",setup(e){const n=a(null);l();const i="https://"+location.hostname+"/qq_login",c=a({qq_login:"0",qq_login_appid:"",qq_login_appkey:""}),r=async()=>{const e=await g({url:"/setting/refreshCache"});h.success(e.msg)},f=()=>{g({url:"/Setting/saveSetting",method:"post",data:{form:c.value}}).then((e=>{h.success(e.msg),1===e.code&&b()}))},b=()=>{g({url:"/Setting/getSetting",method:"post",data:{role:["qq_login","qq_login_appid","qq_login_appkey"]}}).then((e=>{1===e.code&&Object.assign(c.value,e.data),n.value=e.success}))};return b(),(e,l)=>{const a=t("el-option"),g=t("el-select"),h=t("el-form-item"),b=t("el-input"),y=t("el-card"),V=t("el-button"),w=t("el-form");return _((o(),s("div",re,[n.value?(o(),m(w,{key:1,modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),"label-position":"top"},{default:d((()=>[u(y,{class:"mt-4"},{default:d((()=>[ge,u(h,{label:"功能状态"},{default:d((()=>[u(g,{class:"w-full",modelValue:c.value.qq_login,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value.qq_login=e)},{default:d((()=>[u(a,{label:"停用登录",value:"0"},{default:d((()=>[p("停用登录")])),_:1}),u(a,{label:"开启登录",value:"1"},{default:d((()=>[p("开启登录")])),_:1})])),_:1},8,["modelValue"]),he])),_:1}),u(h,{label:"QQ开放平台应用AppId"},{default:d((()=>[u(b,{type:"text",modelValue:c.value.qq_login_appid,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value.qq_login_appid=e),placeholder:"请输入应用appid"},null,8,["modelValue"])])),_:1}),u(h,{label:"QQ开放平台应用AppKey"},{default:d((()=>[u(b,{type:"text",modelValue:c.value.qq_login_appkey,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value.qq_login_appkey=e),placeholder:"请输入应用appkey"},null,8,["modelValue"])])),_:1}),u(h,{label:"QQ互联申请时程序回调地址(无需编辑，固定内容)"},{default:d((()=>[u(b,{type:"text",value:i,placeholder:"无需编辑，固定内容"}),fe])),_:1}),_e,xe,be])),_:1}),v("div",ye,[u(V,{size:"large",class:"mt-4 w-full",type:"primary",onClick:f},{default:d((()=>[p("保存配置文件")])),_:1}),u(V,{size:"large",class:"mt-4 w-40",type:"danger",onClick:r},{default:d((()=>[p("刷新配置文件缓存")])),_:1})])])),_:1},8,["modelValue"])):(o(),s("div",pe,ve))],512)),[[x,null!==n.value]])}}};const we={class:"relative pb-0.5",style:{"min-height":"calc(100vh - 95px)"}},Ae={key:0,class:"absolute w-full flex-col flex justify-center items-center h-full bg-black z-20 bg-opacity-50 rounded-lg"},ke=[v("div",{class:"text-4xl font-bold text-white"}," 此功能属于高级版本请获取授权后使用 ",-1),v("a",{href:"https://mtab.cc/pricing.html",target:"_blank",class:"mt-6 text-xs p-2 px-6 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full ml-8 text-white"},"获取订阅授权解锁更多功能",-1)],Se=v("h2",{class:"mb-4"},"浏览器扩展基础信息",-1),Ue=v("div",{class:"text-sm text-red-500 mt-2"},"* 建议和程序后台版本号保持一致",-1),ze=v("div",{class:"text-sm text-red-500 mt-2"},"* 开发环境下一般不会配置ssl所以选择http，生产环境搭配域名后请使用https ",-1),Ce=v("div",{class:"text-sm text-red-500 mt-2"},"* 只输入当前网站的域名，不需要http和多余的内容，程序会自己根据域名生成对应的，例如这样写：go.mtab.cc ，如果有端口号请加上端口号, 例如：go.mtab.cc:9200 ",-1),Me=v("h2",{class:"mb-4"},"扩展图标 图片文件为png格式哟不要上传错啦 （尺寸单位统一为 像素px 请严格设置好尺寸）",-1),Re={style:{display:"flex","align-items":"center",width:"100%"}},Ee=["src"],Ge={style:{display:"flex","align-items":"center",width:"100%"}},De=["src"],Ne={style:{display:"flex","align-items":"center",width:"100%"}},Qe=["src"],Ie={class:"flex"},We={__name:"ext",setup(e){const c=a(""),y=()=>{window.open(i+c.value)},V=()=>{g({url:"/Setting/delExt"}).then((e=>{1===e.code&&(f({title:"删除成功",message:e.msg,type:"success"}),c.value="")}))},w=a(null),A=l(),k=e=>(1===e.code&&(z.value.ext_logo_64=e.data.url),!0),S=e=>(1===e.code&&(z.value.ext_logo_128=e.data.url),!0),U=e=>(1===e.code&&(z.value.ext_logo_192=e.data.url),!0),z=a({ext_name:"",ext_description:"",ext_version:"",ext_domain:"",ext_logo_64:"",ext_logo_128:"",ext_logo_192:"",ext_protocol:"https"}),C=()=>{g({url:"/Setting/saveSetting",method:"post",data:{form:z.value}}).then((e=>{h.success(e.msg),1===e.code&&M()}))},M=()=>{g({url:"/Setting/getSetting",method:"post",data:{role:["ext_name","ext_description","ext_version","ext_domain","ext_logo_64","ext_logo_128","ext_logo_192","ext_protocol"]}}).then((e=>{1===e.code&&Object.assign(z.value,e.data),w.value=e.success,c.value=e.url}))},R=()=>{const e=b.service({text:"正在打包中。。。请稍后"});g({url:"/admin.Index/build",method:"post",data:{extInfo:z.value}}).then((e=>{1===e.code?(f.success(e.msg),c.value=e.data.url):f.error(e.msg)})).finally((()=>{e.close()}))};return M(),(e,l)=>{const a=t("el-input"),g=t("el-form-item"),h=t("el-option"),f=t("el-select"),b=t("el-card"),M=t("el-button"),E=t("el-upload"),G=t("el-form");return _((o(),s("div",we,[w.value?(o(),m(G,{key:1,modelValue:z.value,"onUpdate:modelValue":l[8]||(l[8]=e=>z.value=e),"label-position":"top"},{default:d((()=>[u(b,{class:"mt-4"},{default:d((()=>[Se,u(g,{label:"扩展manifest名称 （name）"},{default:d((()=>[u(a,{type:"text",modelValue:z.value.ext_name,"onUpdate:modelValue":l[0]||(l[0]=e=>z.value.ext_name=e),placeholder:"扩展展示的名称"},null,8,["modelValue"])])),_:1}),u(g,{label:"扩展manifest简介 （description）"},{default:d((()=>[u(a,{type:"text",modelValue:z.value.ext_description,"onUpdate:modelValue":l[1]||(l[1]=e=>z.value.ext_description=e),placeholder:"扩展商城和管理页面的简介"},null,8,["modelValue"])])),_:1}),u(g,{label:"扩展manifest版本号（version）"},{default:d((()=>[u(a,{type:"text",modelValue:z.value.ext_version,"onUpdate:modelValue":l[2]||(l[2]=e=>z.value.ext_version=e),placeholder:"推荐和程序保持一致"},null,8,["modelValue"]),Ue])),_:1}),u(g,{label:"网站网络协议 （ext_protocol）开发环境一般为http，生产环境请务必选择https"},{default:d((()=>[u(f,{modelValue:z.value.ext_protocol,"onUpdate:modelValue":l[3]||(l[3]=e=>z.value.ext_protocol=e)},{default:d((()=>[u(h,{label:"http",value:"http"},{default:d((()=>[p("http")])),_:1}),u(h,{label:"https",value:"https"},{default:d((()=>[p("https")])),_:1})])),_:1},8,["modelValue"]),ze])),_:1}),u(g,{label:"域名（domain）请确保您填的写域名对应的网站配置了SSL证书并且支持HTTPS"},{default:d((()=>[u(a,{type:"text",modelValue:z.value.ext_domain,"onUpdate:modelValue":l[4]||(l[4]=e=>z.value.ext_domain=e),placeholder:"您的网站的域名部分，不要包含协议, 例子：go.mtab.cc"},null,8,["modelValue"]),Ce])),_:1})])),_:1}),u(b,{class:"mt-4"},{default:d((()=>[Me,u(g,{label:"扩展图标64x64（icon）默认会作为网页的favicon"},{default:d((()=>[v("div",Re,[z.value.ext_logo_64?(o(),s("img",{key:0,src:z.value.ext_logo_64,style:{width:"30px",height:"30px","margin-right":"10px","border-radius":"3px"}},null,8,Ee)):r("",!0),u(a,{modelValue:z.value.ext_logo_64,"onUpdate:modelValue":l[5]||(l[5]=e=>z.value.ext_logo_64=e),placeholder:"请上传(64x64) logo"},{append:d((()=>[u(E,{class:"upload-demo","show-file-list":!1,"on-success":k,action:n(i)+n(A).state.site.upload},{default:d((()=>[u(M,{type:"primary"},{default:d((()=>[p("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])])),_:1}),u(g,{label:"扩展图标128x128（icon）"},{default:d((()=>[v("div",Ge,[z.value.ext_logo_128?(o(),s("img",{key:0,src:z.value.ext_logo_128,style:{width:"30px",height:"30px","margin-right":"10px","border-radius":"3px"}},null,8,De)):r("",!0),u(a,{modelValue:z.value.ext_logo_128,"onUpdate:modelValue":l[6]||(l[6]=e=>z.value.ext_logo_128=e),placeholder:"请上传(128x128) logo"},{append:d((()=>[u(E,{class:"upload-demo","show-file-list":!1,"on-success":S,action:n(i)+n(A).state.site.upload},{default:d((()=>[u(M,{type:"primary"},{default:d((()=>[p("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])])),_:1}),u(g,{label:"扩展图标192x192（icon）"},{default:d((()=>[v("div",Ne,[z.value.ext_logo_192?(o(),s("img",{key:0,src:z.value.ext_logo_192,style:{width:"30px",height:"30px","margin-right":"10px","border-radius":"3px"}},null,8,Qe)):r("",!0),u(a,{modelValue:z.value.ext_logo_192,"onUpdate:modelValue":l[7]||(l[7]=e=>z.value.ext_logo_192=e),placeholder:"请上传(192x192) logo"},{append:d((()=>[u(E,{class:"upload-demo","show-file-list":!1,"on-success":U,action:n(i)+n(A).state.site.upload},{default:d((()=>[u(M,{type:"primary"},{default:d((()=>[p("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])])),_:1})])),_:1}),v("div",Ie,[u(M,{size:"large",class:"mt-4 w-1/2",type:"primary",onClick:C},{default:d((()=>[p("保存配置文件")])),_:1}),u(M,{size:"large",class:"mt-4 w-1/2",type:"success",onClick:R},{default:d((()=>[p("构建浏览器扩展压缩包.zip")])),_:1}),c.value?(o(),m(M,{key:0,size:"large",class:"mt-4 w-60 flex-shrink-0",type:"danger",onClick:y},{default:d((()=>[p(" 下载已打包好的扩展.zip ")])),_:1})):r("",!0),c.value?(o(),m(M,{key:1,size:"large",class:"mt-4 w-60 flex-shrink-0",type:"warning",onClick:V},{default:d((()=>[p(" 删除扩展压缩包.zip ")])),_:1})):r("",!0)])])),_:1},8,["modelValue"])):(o(),s("div",Ae,ke))],512)),[[x,null!==w.value]])}}},Te={class:"flex flex-col",style:{height:"calc(100vh - 100px)"}},qe={class:"mt-6 flex"},Oe={__name:"privacy",setup(e){const l=a(""),n=location.protocol+"//"+location.host,i=async()=>{const e=await g({url:"/Setting/saveSetting",method:"post",data:{form:{privacy:l.value}}});1===e.code?h.success(e.msg):h.warning(e.msg)};return g({url:"/Setting/getSetting",method:"post",data:{role:["privacy"]}}).then((e=>{if(1===e.code){const{privacy:a=""}=e.data;a&&(l.value=a)}})),(e,a)=>{const m=t("el-button");return o(),s("div",Te,[u(z,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e)},null,8,["modelValue"]),v("div",{class:"text-red-500 text-sm mt-4"},"* 一般提供登录服务的程序都需要有隐私政策协议，故请您认真填写，如果您是个人使用且不提供大众使用，可以不用设置此项。不会写怎么办？去copy同类产品的呀，记得改名字！！！ 协议访问地址为 "+y(n)+"/privacy.html "),v("div",qe,[u(m,{class:"w-full",size:"large",onClick:i,type:"primary"},{default:d((()=>[p("保存协议")])),_:1})])])}}},Ze={class:"setting-tab bg-white p-2 rounded-lg flex text-sm"},Le=["onClick"],Fe={class:"manager-setting mt-4"},Pe={__name:"setting",setup(e){const l=V({name:"基础设置",component:D}),a=[{name:"基础设置",component:D},{name:"邮件配置",component:ce},{name:"公告管理",component:O},{name:"备案与版权",component:B},{name:"第三方登录",component:Ve},{name:"浏览器扩展",component:We},{name:"隐私政策",component:Oe},{name:"订阅与授权",component:ee}];return(e,t)=>(o(),s(w,null,[v("div",Ze,[(o(),s(w,null,A(a,(e=>u(U,null,{default:d((()=>[v("div",{onClick:a=>(e=>{l.value=e})(e),class:S([{"bg-blue-400 text-white":n(l).name===e.name},"px-6 py-1.5 rounded-md cursor-pointer"])},y(e.name),11,Le)])),_:2},1024))),64))]),v("div",Fe,[(o(),m(k(n(l).component)))])],64))}};export{Pe as default};

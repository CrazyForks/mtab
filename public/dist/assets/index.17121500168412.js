import{r as e,u as t,w as a,o as s,a as n,b as o,c as l,d as i,e as r,F as c,f as u,g as d,h as p,i as v,v as m,n as g,j as f,k as h,l as y,m as k,p as x,T as w,_ as b,t as C,q as _,s as L,x as G,y as M,A as S,z as E,B as T,C as j,D as I,E as P,G as B,H as D,I as O,J as A,K as R,L as z,M as q,N as H,O as N,P as V,Q as F,R as U,S as Y,U as W,V as X,W as K}from"./index.1712150016841.js";import{r as $,o as J,a as Z,b as Q}from"./href.1712150016841.js";import{S as ee}from"./sortable.esm.1712150016841.js";import{d as te,M as ae}from"./dialog.1712150016841.js";import{$ as se}from"./jquery.1712150016841.js";import{_ as ne}from"./net.1712150016841.js";var oe="/dist/assets/close.1712150016841.svg";const le={class:"footer-box"},ie=["onDragstart","data-id"],re=["onClick"],ce=["onClick"],ue={key:1,src:"/dist/assets/wapp.1712150016841.svg",class:"wappfooter",alt:""},de=["src"],pe={class:"flex"},ve=[r("div",{class:"split-line mr-3 ml-1"},null,-1)],me={class:"flex space-x-3"},ge=["onDragstart"],fe=["onClick"],he=["src","alt"],ye=r("div",{class:"split-line ml-2"},null,-1),ke={class:"flex ml-4"},xe=["onDrop"],we=[r("div",{class:"trash-can"},[r("img",{src:"/dist/assets/lajitong.1712150016841.png",alt:"垃圾桶"})],-1)],be={__name:"footer",props:{reload:{type:Function}},setup(b){const C=b,_=e(!1),L=e(""),G=e(te),M=t(),S=e(M.state.tabbar),E=(e,t)=>{if("icon"===e.type)return parseInt(window.innerWidth/70),!0},T=e=>{const t=M.state.link.find((t=>t.id.toString()===e.id.toString()));return t?t.src:e.src},j=e=>{const{itemId:t=""}=e,a=M.state.link.find((e=>e.id.toString()===t.toString()));let{bgColor:s=null}=a||e;return M.state.config.theme.iconBg&&null===s?"#fff":s};window.moveMark=null;const I=e=>{let t=[];e.forEach((e=>{t.push({title:e.title,ico:e.ico,uid:e.uid,origin:e.origin})})),G.value=t},P=e=>{const t=window.moveMark;"tabbar"===t.form&&B(t),"task"===t.form&&te.forEach((e=>{e.uid===t.uid&&e.close()})),"link"===t.form&&M.commit("delLink",t.id),window.moveMark=null};a((()=>M.state.tabbar),(e=>{S.value=e}));const B=e=>{const t=S.value.findIndex((t=>t.id==e.id));S.value.splice(t,1),M.commit("updateTabbar",S.value)};return ae.on("refresh",I),s((()=>{ae.off("refresh",I)})),n((()=>{const e=L.value,t={animation:400,delay:1e3,delayOnTouchOnly:!0,draggable:".item",onEnd:function(e){let t=a.toArray(),s=[];t.forEach((e=>{s.push(S.value.find((t=>t.id==e)))})),M.commit("updateTabbar",s),C.reload()}};let a=ee.create(e,t)})),(e,t)=>{const a=o("el-tooltip");return l(),i("div",{class:"footer-component fixed inset-x-0 bottom-0",onContextmenu:t[3]||(t[3]=y((()=>{}),["prevent"]))},[r("div",le,[r("div",{class:"list flex space-x-3",id:"footerItxst",ref_key:"footerItxst",ref:L},[(l(!0),i(c,null,u(S.value,((e,t)=>(l(),d(w,{key:e.id},{default:p((()=>[v(r("div",{draggable:"true",onDragstart:t=>{return a=e,void(window.moveMark=Object.assign(a,{form:"tabbar"}));var a},class:g(["item",f(M).state.editStatus?"edits":""]),"data-id":e.id},[h(a,{effect:"customized",content:null==e?void 0:e.name,placement:"top",disabled:!f(M).state.config.theme.LinkTitle},{default:p((()=>[r("div",{class:"itemBox hover",onClick:t=>f($)(e.id)},[f(M).state.editStatus?(l(),i("img",{key:0,onClick:y((t=>B(e)),["stop"]),class:"del-footer",src:oe},null,8,ce)):k("",!0),1===(null==e?void 0:e.app)?(l(),i("img",ue)):k("",!0),r("img",{class:"icon",src:T(e),style:x({background:j(e)}),alt:""},null,12,de)],8,re)])),_:2},1032,["content","disabled"])],42,ie),[[m,E(e)]])])),_:2},1024)))),128))],512),r("div",pe,[v(r("div",null,ve,512),[[m,G.value.length]]),v(r("div",me,[(l(!0),i(c,null,u(G.value,(e=>(l(),i("div",{class:"taskBox",draggable:"true",onDragstart:t=>{return a=e,void(window.moveMark=Object.assign(a,{form:"task"}));var a}},[r("div",{onClick:t=>(e=>{te.forEach((t=>{t.uid===e.uid&&(t.isMinimize&&t.setMineSize(),t.resetIndex())}))})(e),class:"rounded-xl cursor-pointer relative taskIco"},[r("img",{class:"w-full h-full rounded-xl",style:x({background:j(e)}),src:e.ico,alt:e.title},null,12,he)],8,fe)],40,ge)))),256))],512),[[m,G.value.length]]),ye,r("div",ke,[r("div",{class:g(["taskBox",{trashBin:_.value}]),onDragenter:t[0]||(t[0]=y((e=>_.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=y((e=>_.value=!1),["prevent"])),onDrop:y(P,["prevent"]),onDragover:t[2]||(t[2]=y((()=>{}),["prevent"]))},we,42,xe)])])])],32)}}};const Ce={class:"time"},_e={class:"time-month"},Le={class:"time-week"};var Ge=b({__name:"time",emits:["change","update"],setup(a,{emit:s}){const n=t();function o(){return _().format("HH:mm:ss")}const c=()=>{s("change")};function u(){return _().format("MM月DD日")}function d(){switch(_().day()){case 1:return"星期一";case 2:return"星期二";case 3:return"星期三";case 4:return"星期四";case 5:return"星期五";case 6:return"星期六";case 0:return"星期日"}}const p=e(o()),v=e(u()),m=e(d());return setInterval((()=>{p.value=o(),v.value=u(),m.value=d()}),500),(e,t)=>(l(),i("div",Ce,[r("div",null,[r("div",{onContextmenu:t[0]||(t[0]=y((()=>{}),["prevent","stop"])),class:"time-hms text-7xl mxs:text-6xl",onClick:c,style:x({color:f(n).state.config.theme.timeColor})},C(p.value),37),r("div",{onContextmenu:t[1]||(t[1]=y((()=>{}),["prevent","stop"])),class:"time-other space-x-2",style:x({color:f(n).state.config.theme.timeColor})},[r("span",_e,C(v.value),1),r("span",Le,C(m.value),1)],36)])]))}},[["__scopeId","data-v-6dd57058"]]);const Me=["src"],Se=r("span",{class:"text-xs text-gray-200 mt-0.5"},"首页",-1),Ee=["data-id"],Te=["onClick","onContextmenu"],je=["src","alt","title"],Ie={class:"text-gray-200 mt-0.5",style:{"font-size":"12px"}},Pe={class:"miniFloatController minxs:hidden space-y-3"},Be=r("div",{class:"text-sm text-gray-50"},"分类图标",-1),De={class:"mt-1.5 grid grid-cols-5 gap-2"},Oe=["title","onClick"],Ae=["src"],Re={class:"mt-2"},ze=r("div",{class:"text-sm text-gray-50"},"分类名称",-1),qe={class:"mt-3 flex justify-end"},He={__name:"AppPageGroup",props:{reload:{type:Function}},setup(t){const m=t,b=e(!0),_=L({x:0,y:0,status:!1}),P=e(0),B=e(""),D=e(!1),O=e({src:"",name:""}),A=[{src:"/static/pageGroup/home.svg",name:"主页"},{src:"/static/pageGroup/game.svg",name:"游戏"},{src:"/static/pageGroup/music.svg",name:"音乐"},{src:"/static/pageGroup/work.svg",name:"办公"},{src:"/static/pageGroup/chat.svg",name:"社交"},{src:"/static/pageGroup/shop.svg",name:"购物"},{src:"/static/pageGroup/travel.svg",name:"出行"},{src:"/static/pageGroup/all.svg",name:"综合"},{src:"/static/pageGroup/read.svg",name:"阅读"},{src:"/static/pageGroup/astronomy.svg",name:"天文"},{src:"/static/pageGroup/safe.svg",name:"安全"},{src:"/static/pageGroup/crown.svg",name:"王冠"},{src:"/static/pageGroup/shanzi.svg",name:"扇子"},{src:"/static/pageGroup/photo.svg",name:"图片"},{src:"/static/pageGroup/star.svg",name:"星星"},{src:"/static/pageGroup/liwu.svg",name:"礼物"},{src:"/static/pageGroup/code.svg",name:"代码"},{src:"/static/pageGroup/movie.svg",name:"电影"},{src:"/static/pageGroup/hiuzhang.svg",name:"徽章"},{src:"/static/pageGroup/study.svg",name:"学习"}],R=G((()=>{let e=[];return M.state.link.forEach((t=>{"pageGroup"===t.type&&e.push(t)})),Object.assign([],S(e))})),z=e(null),q=(e=null,t)=>{if(e){let t=M.state.link.find((t=>t.id===e));t&&(O.value=t)}else O.value={src:"/static/pageGroup/home.svg",name:""};let a=document.querySelector(".floatController").offsetTop;P.value=parseInt(a.toString()),D.value=!0,_.status=!1},H=e=>{M.state.pageGroup=e},N=()=>{D.value=!1},V=()=>{z.value&&M.commit("delLink",z.value),_.status=!1},F=()=>{if(O.value.id){let e=M.state.link.find((e=>e.id===O.value.id));Object.assign(e,O.value)}else{let e={id:I(),src:O.value.src,name:O.value.name,type:"pageGroup",sort:99};M.state.link.push(e)}M.commit("updateLink"),N()};function U(){_.status=!1,N()}n((()=>{(()=>{const e=B.value,t={animation:400,delay:1e3,delayOnTouchOnly:!0,draggable:".item",onEnd:function(e){a.toArray().forEach(((e,t)=>{let a=M.state.link.find((t=>t.id===e));a&&(a.sort=t)})),M.commit("updateLink"),m.reload()}};let a=ee.create(e,t)})()}));let Y=null;const W=e=>{const{clientX:t,clientY:a}=e;if(M.state.config.theme.pageGroupStatus&&B.value)if(t<=350)null!==Y&&(clearTimeout(Y),Y=null),b.value=!0;else{if(null!=Y)return;Y=setTimeout((()=>{b.value=!1}),3e3)}};return a((()=>M.state.config.theme.pageGroupStatus),(e=>{e?b.value=!1:(clearTimeout(Y),Y=null,b.value=!0)})),window.addEventListener("mousedown",U),window.addEventListener("mousemove",W),s((()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mousedown",U)})),(e,t)=>{const a=o("el-icon"),s=o("el-button");return l(),i("div",{class:"appPageGroup",onContextmenu:t[11]||(t[11]=y((()=>{}),["prevent"]))},[r("div",{class:"floatController mxs:hidden",style:x({transform:b.value?"translateX(0)":"translateX(-100px)"}),ref_key:"floatController",ref:B},[r("div",{class:"flex justify-center",onContextmenu:t[1]||(t[1]=y((()=>{}),["stop","prevent"]))},[r("div",{class:g(["flex flex-col items-center cursor-pointer groupTab justify-center",{pageSelect:""===f(M).state.pageGroup}]),onClick:t[0]||(t[0]=e=>H(""))},[r("img",{style:{width:"24px",height:"24px",filter:"brightness(0.9)"},src:"/static/pageGroup/home.svg",alt:"首页",title:"首页"},null,8,Me),Se],2)],32),(l(!0),i(c,null,u(f(R),((e,a)=>(l(),d(w,{key:a},{default:p((()=>["pageGroup"===e.type?(l(),i("div",{key:0,"data-id":e.id,class:"flex item justify-center mt-1",onContextmenu:t[2]||(t[2]=y((()=>{}),["stop","prevent"]))},[r("div",{onClick:t=>H(e.id),class:g([{pageSelect:f(M).state.pageGroup===e.id},"flex flex-col items-center cursor-pointer groupTab justify-center relative"]),onContextmenu:y((t=>((e,t)=>{const{left:a,top:s}=t.target.getBoundingClientRect();_.x=a+45,_.y=s,_.status=!0,z.value=e.id})(e,t)),["stop","prevent"])},[r("img",{style:{width:"24px",height:"24px",filter:"brightness(0.9)"},src:e.src,alt:e.name,title:e.name},null,8,je),r("span",Ie,C(e.name),1)],42,Te)],40,Ee)):k("",!0)])),_:2},1024)))),128)),r("div",{onClick:t[3]||(t[3]=e=>q(null)),class:"flex justify-center relative items-center mt-4 h-5 cursor-pointer text-2xl hover:text-3xl transition-all"},[h(a,{color:"#fff",style:{"pointer-events":"none"},title:"添加分类"},{default:p((()=>[h(f(E))])),_:1})])],4),r("div",Pe,[r("div",{style:{width:"10px",height:"10px","border-radius":"10px"},class:g(["bg-gray-300 border border-gray-300",""===f(M).state.pageGroup?"bg-opacity-100":"bg-opacity-30"])},null,2),(l(!0),i(c,null,u(f(R),((e,t)=>(l(),d(w,{key:t},{default:p((()=>[r("div",{style:{width:"10px",height:"10px","border-radius":"10px"},class:g(["bg-gray-300 border border-gray-300",f(M).state.pageGroup===e.id?"bg-opacity-100":"bg-opacity-30"])},null,2)])),_:2},1024)))),128))]),_.status?(l(),i("div",{key:0,class:"menuGroup",onContextmenu:t[7]||(t[7]=y((()=>{}),["prevent"])),style:x({left:"75px",top:_.y+"px"})},[r("div",{onMousedown:t[4]||(t[4]=y((()=>{}),["stop"])),onClick:t[5]||(t[5]=e=>q(z.value))},"编辑分类",32),r("div",{onMousedown:t[6]||(t[6]=y((()=>{}),["stop"])),onClick:V},"删除",32)],36)):k("",!0),D.value?(l(),i("div",{key:1,onContextmenu:t[9]||(t[9]=y((()=>{}),["stop","prevent"])),onMousedown:t[10]||(t[10]=y((()=>{}),["stop"])),style:x({top:P.value+"px"}),class:"addPageGroupBox"},[r("div",null,[Be,r("div",De,[(l(),i(c,null,u(A,(e=>h(w,null,{default:p((()=>[r("div",{class:g([{selIconsClass:e.src===O.value.src},"flex flex-col justify-center items-center gap-2 p-1 cursor-pointer"]),title:e.name,onClick:t=>{return a=e,void(O.value.src=a.src);var a},style:{width:"30px",height:"30px"}},[r("img",{style:{width:"24px",height:"24px"},src:e.src},null,8,Ae)],10,Oe)])),_:2},1024))),64))])]),r("div",Re,[ze,v(r("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>O.value.name=e),class:"rounded-md mt-2 bg-white bg-opacity-20 text-xs px-1.5 py-1.5 w-full text-white placeholder-white outline-none border-none relative",type:"text",maxlength:"5",placeholder:"请填写分类名称"},null,512),[[T,O.value.name]])]),r("div",qe,[h(s,{type:"primary",class:"w-full",round:"",onClick:F,size:"small"},{default:p((()=>[j("保存")])),_:1})])],36)):k("",!0)],32)}}},Ne={class:"RecordNumber msm:hidden flex pointer-events-none"},Ve={class:"pointer-events-auto"},Fe={key:0,target:"_blank",href:"https://beian.miit.gov.cn/"},Ue={key:1},Ye=r("br",null,null,-1),We=["href"],Xe={key:2},Ke=r("br",null,null,-1),$e=["innerHTML"],Je={__name:"copyright",setup(e){const a=t();return(e,t)=>(l(),i("div",Ne,[r("div",Ve,[f(a).state.site.recordNumber?(l(),i("a",Fe,C(f(a).state.site.recordNumber),1)):k("",!0),f(a).state.site.beianMps?(l(),i("span",Ue,[Ye,r("a",{href:"https://beian.mps.gov.cn/#/query/webSearch?code="+f(a).state.site.beianMps,target:"_blank"},C(f(a).state.site.beianMps),9,We)])):k("",!0),f(a).state.site.copyright?(l(),i("span",Xe,[Ke,r("span",{innerHTML:f(a).state.site.copyright},null,8,$e)])):k("",!0)])]))}};const Ze={class:"flex justify-center pl-4 pr-4"},Qe={class:"search-box max-w-screen-sm ml-2 mr-2 mt-8 flex-shrink"},et={class:"focus-search max-w-screen-sm"},tt=["src"],at=r("svg",{class:"pointer-events-none",width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M36 19L24 31L12 19H36Z",fill:"none",stroke:"#9CA3AF","stroke-width":"4","stroke-linejoin":"round"})],-1),st=["type","placeholder","autofocus"],nt=["onClick"],ot={class:"searchList max-w-screen-sm flex-shrink"},lt=["onWheel"],it=["onClick"],rt=["src"],ct={class:"text-xs mt-1.5"},ut=["onClick"],dt=[r("img",{style:{padding:"5px"},src:"/dist/assets/add.1712150016841.png",alt:""},null,-1),r("span",{class:"text-xs mt-1.5"},"自定义引擎",-1)],pt={key:0,class:"iconSearchResult space-x-5"},vt={key:0,class:"space-x-3.5 iconSearchResultItem"},mt=["onClick"],gt=["src"],ft={class:"text-xs mt-2"},ht={key:0,class:"searchRecommended"},yt=["onClick"],kt=r("img",{src:"/dist/assets/search.1712150016841.svg",class:"w-4 h-4",alt:""},null,-1),xt={class:"truncate ml-2 text-sm text-gray-600"},wt={__name:"search",setup(n){const o=e(""),d=e(""),b=e("输入并搜索..."),_=e([]);let L=!1;const G=t(),M=e("hidden"),S=e("");setTimeout((()=>{M.value="text",G.state.config.openType.autofocus&&setTimeout((()=>{document.querySelector("#search").click(),document.querySelector("#search").focus()}),100)}),300);const E=e({}),T=e([]),j=e=>{const{scrollLeft:t=0}=o.value,{deltaY:a=0,deltaX:s=0}=e;let n=Math.abs(s)>Math.abs(a)?s:a;o.value.scrollTo({top:0,left:n+t})},I=e(-1),q=e(!1),H=e(),N=e(""),V=()=>{q.value&&(z({target:H.value},"fadeOut"),setTimeout((()=>{q.value=!1}),450))},F=()=>{G.state.config.openType.searchRecommend&&se.ajax({url:"https://www.baidu.com/sugrec?prod=pc&wd="+N.value,dataType:"jsonp",success:e=>{if(e.g){let t=e.g,a=[];t.forEach((e=>{a.push(e.q)}));let s=Math.ceil(d.value.getBoundingClientRect().top);G.state.config.openType.searchLink&&(s+=110),s=window.innerHeight-s,re.value=a.slice(0,Math.ceil(s/45))}else re.value=[]}})},U=()=>{let e=[];""!==N.value.trim()&&G.state.link.forEach((t=>{const{name:a="",url:s="",type:n=""}=t;(a.toLowerCase().indexOf(N.value.toLowerCase())>-1||s.toLowerCase().indexOf(N.value.toLowerCase())>-1)&&"component"!==n&&e.push(t)})),_.value=e},Y=()=>{I.value=-1,F(),U()},W=e=>{O((()=>{if(L){let e=N.value;ee(e)}}))},X=()=>{V(),te.value=!0},K=()=>{N.value="",Y()},Q=e=>{N.value=e,ee(e)},ee=e=>{let t=E.value.url,a="";/^(http:\/\/|https:\/\/)/.test(e)?a=e:(""===e&&(e=b.value),a=/\{1}/.test(t)?t.replace(/\{1}/,e):t+e),G.state.config.openType.searchOpen?J(a):location.href=a},te=e(!1),ae=e=>{setTimeout((e=>{te.value=!1}),300),e.preventDefault(),e.stopPropagation()},oe=()=>{q.value?V():q.value=!0},le=e=>{if("Tab"===e.code){let t=T.value.findIndex((e=>e.name===E.value.name));e.shiftKey?t>0?t-=1:t=T.value.length-1:t<T.value.length-1?t+=1:t=0,pe(T.value[t]),e.preventDefault(),e.stopPropagation()}"Enter"!==e.code&&"NumpadEnter"!==e.code&&"Enter"!==e.key||(L=!0,setTimeout((()=>{L=!1}),100)),"Escape"===e.code&&(N.value="",F(),U()),"ArrowDown"===e.code&&(I.value===re.value.length-1?I.value=0:I.value+=1,re.value.length>0&&(N.value=re.value[I.value]),e.preventDefault(),e.stopPropagation()),"ArrowUp"===e.code&&(0===I.value?I.value=re.value.length-1:I.value-=1,re.value.length>0&&(N.value=re.value[I.value]),e.preventDefault(),e.stopPropagation())},ie="#747474",re=e([]),ce=e=>{const{id:t}=e.target;"Searchengine"!==t&&q.value&&V()},ue=()=>{G.state.isLogin?(Z("tab://addSearchEngine"),V()):A.warning("该功能需要登录后才能使用")},de=e=>{b.value=e};P.on("placeholder",de),window.addEventListener("click",ce),s((()=>{window.removeEventListener("click",ce),P.off("placeholder",de)}));const pe=e=>{E.value=e,R.set("SearchEngineLocal",e),V()},ve=()=>{const e=R.get("SearchEngineLocal",!1);if(e){const{icon:t,name:a,url:s}=e;pe({name:a,url:s,icon:t})}else T.value.length>0&&pe(T.value[0])};return ve(),a((()=>G.state.searchEngine),(e=>{T.value=e,ve()})),G.commit("pullSearchEngine"),(e,t)=>{var a;const s=B("animate");return l(),i("div",Ze,[r("div",Qe,[r("div",et,[r("div",{class:"layui-icon Searchengine hover select-none",id:"Searchengine",onClick:oe},[r("img",{src:(null==(a=E.value)?void 0:a.icon)||f(ne),class:"pointer-events-none"},null,8,tt),at]),v(r("input",{ref_key:"searchRef",ref:S,id:"search",type:M.value,autocomplete:"off",onInput:Y,"onUpdate:modelValue":t[0]||(t[0]=e=>N.value=e),class:"text-sm",placeholder:b.value,onContextmenu:t[1]||(t[1]=y((()=>{}),["prevent","stop"])),onFocus:X,onBlur:ae,autocapitalize:"none",onKeydown:le,onKeypress:W,autofocus:f(G).state.config.openType.autofocus},null,40,st),[[D,N.value]]),v(r("i",{onClick:y(K,["stop"])},[r("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M14 14L34 34",stroke:ie,"stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),r("path",{d:"M14 34L34 14",stroke:ie,"stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})])],8,nt),[[m,N.value]]),r("i",{class:"hover",onClick:t[2]||(t[2]=e=>Q(N.value))},[r("svg",{width:"22",height:"22",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M21 38C30.3888 38 38 30.3888 38 21C38 11.6112 30.3888 4 21 4C11.6112 4 4 11.6112 4 21C4 30.3888 11.6112 38 21 38Z",fill:"none",stroke:ie,"stroke-width":"4","stroke-linejoin":"round"}),r("path",{d:"M26.657 14.3431C25.2093 12.8954 23.2093 12 21.0001 12C18.791 12 16.791 12.8954 15.3433 14.3431",stroke:ie,"stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),r("path",{d:"M33.2216 33.2217L41.7069 41.707",stroke:ie,"stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})])])]),r("div",ot,[q.value?v((l(),i("div",{key:0,class:"searchType space-x-5",ref_key:"searchTypeDom",ref:H},[r("div",{class:"space-x-3.5",ref_key:"searchEngineBox",ref:o,onWheel:y(j,["stop","prevent"])},[(l(!0),i(c,null,u(T.value,(e=>(l(),i("div",{onClick:y((t=>pe(e)),["stop"]),class:"hover flex-shrink"},[r("img",{src:e.icon,alt:""},null,8,rt),r("span",ct,C(e.name),1)],8,it)))),256)),r("div",{class:"hover flex-shrink",onClick:y(ue,["stop"])},dt,8,ut)],40,lt)])),[[s,"fadeIn"]]):k("",!0),h(w,{name:"fadeInIcon"},{default:p((()=>[te.value&&_.value.length>0&&f(G).state.config.openType.searchLink?(l(),i("div",pt,[_.value.length>0?(l(),i("div",vt,[(l(!0),i(c,null,u(_.value,(e=>(l(),i("div",{onClick:t=>f($)(null==e?void 0:e.id),class:"hover flex-shrink"},[r("img",{src:e.src,style:x({background:null==e?void 0:e.bgColor}),alt:""},null,12,gt),r("div",ft,C(e.name),1)],8,mt)))),256))])):k("",!0)])):k("",!0)])),_:1}),r("div",{ref_key:"searchRecommended",ref:d},[te.value&&re.value.length&&f(G).state.config.openType.searchRecommend?(l(),i("div",ht,[r("ul",null,[(l(!0),i(c,null,u(re.value,((e,t)=>(l(),i("li",{class:g(["flex items-center searchRecommendedList",t===I.value?"keySelect":""]),onClick:t=>Q(e)},[kt,r("p",xt,C(e),1)],10,yt)))),256))])])):k("",!0)],512)])])])}}};const bt=["id"],Ct=["src"],_t={key:1,src:"/dist/assets/wapp.1712150016841.svg",class:"wapp rounded-full",alt:""},Lt={class:"iconName"},Gt={__name:"icon",setup(s){const n=q(),c=t(),u=e(Object.assign({},n.data));let{bgColor:d=null}=u;const v=e(d),m=()=>{let{bgColor:e=null}=u.value;v.value=e,null===e&&c.state.config.theme.iconBg&&(v.value="#fff")};m(),a((()=>c.state.config.theme.iconBg),m);a((()=>n.data),(e=>{d=e.bgColor,v.value=d,u.value=e,m()}));return(e,t)=>{var a;const s=o("el-tooltip");return l(),i("div",{draggable:"true",onDragstart:t[3]||(t[3]=e=>{return t=u.value,void(window.moveMark=Object.assign(t,{form:"link"}));var t}),class:g(["item filter row-span-1 col-span-1",f(c).state.editStatus?"edits":""])},[h(s,{effect:"customized",content:null==(a=u.value)?void 0:a.name,placement:"bottom",offset:-5,disabled:!f(c).state.config.theme.LinkTitle},{default:p((()=>{var e,a,s;return[r("div",{class:"itemBox relative hover",onClick:t[1]||(t[1]=e=>{return t=u.value,c.state.moveStatus=!1,void $(null==t?void 0:t.id);var t}),id:u.value.id,onContextmenu:t[2]||(t[2]=y((e=>((e,t)=>{const{button:a,clientX:s,clientY:n}=e;2===a&&P.emit("mousePs",{left:s,top:n,data:t,call:function(){se(e.target).parent().remove()}}),e.stopPropagation()})(e,u.value)),["prevent"]))},[f(c).state.editStatus?(l(),i("img",{key:0,onClick:t[0]||(t[0]=y((e=>{return t=u.value,se(e.target).parent().parent().remove(),void c.commit("delLink",t.id);var t}),["stop"])),class:"del-footer",src:oe,alt:""})):k("",!0),r("img",{class:"icon",style:x({background:v.value}),src:null==(e=u.value)?void 0:e.src,alt:""},null,12,Ct),1===(null==(a=u.value)?void 0:a.app)?(l(),i("img",_t)):k("",!0),r("div",Lt,C(null==(s=u.value)?void 0:s.name),1)],40,bt)]})),_:1},8,["content","disabled"])],34)}}};const Mt={class:"comp"},St=["data-appid","src"],Et=["src"],Tt={key:2,class:"moveIco"},jt=[(e=>(F("data-v-5166c119"),e=e(),U(),e))((()=>r("img",{src:"/dist/assets/arc.1712150016841.svg",alt:"move",title:"移动或右键菜单"},null,-1)))],It={class:"names"};var Pt=b({__name:"plugin",props:{info:{type:Object}},setup(s){const n=s,o=e(""),c=H(!0),u=t(),{size:v="1x1",component:m,url:x,id:b}=n.info;let _;"plugins"===m||(_=N((()=>{return"./plugin/iconGroup.vue"===(e=`./plugin/${m}.vue`)?V((()=>import("./iconGroup.1712150016841.js")),["assets/iconGroup.1712150016841.js","assets/iconGroup.1712150016841.css","assets/index.1712150016841.js","assets/index.17121500168415.css","assets/jquery.1712150016841.js"]):new Promise((function(t,a){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e)))}));var e})));const L=()=>{c.value=!1},G=()=>{c.value=!0},M=e("c"+v),S=H(n.info);a((()=>n.info),(e=>{M.value="c"+e.size,S.value=e}));return(e,t)=>(l(),i("div",{class:g(["item",(f(u).state.editStatus?"edits":"")+" filter "+M.value])},[r("div",{class:"itemBox",onContextmenu:t[2]||(t[2]=y((e=>((e,t)=>{const{button:a,clientX:s,clientY:n}=e;2===a&&P.emit("mousePs",{left:s,top:n,data:Object.assign({},t)}),e.stopPropagation()})(e,f(S))),["prevent"]))},[f(u).state.editStatus?(l(),i("img",{key:0,onClick:t[0]||(t[0]=y((e=>{return t=f(S),void u.commit("delLink",t.id);var t}),["stop"])),class:"del-footer",src:oe})):k("",!0),r("section",Mt,["plugins"===f(m)?(l(),d(w,{key:0},{default:p((()=>[r("div",{class:"iframeBox",onClick:t[1]||(t[1]=e=>f(Q)(f(S)))},["1x1"!==f(S).size?(l(),i("iframe",{key:0,ref_key:"iframe",ref:o,"data-appid":f(S).id,class:g([{"pointer-events-none":"1x1"===f(S).size||f(u).state.moveStatus},"plugins"]),allowtransparency:"true",onLoad:L,onLoadstart:G,src:f(S).url},"\r\n            ",42,St)):(l(),i("img",{key:1,style:{width:"100%",height:"100%",background:"#FFf","object-fit":"contain"},src:f(S).src,alt:""},null,8,Et)),"1x1"!==f(S).size?(l(),i("div",Tt,jt)):k("",!0)])])),_:1})):(l(),d(w,{key:1},{default:p((()=>[h(f(_),{data:f(S)},null,8,["data"])])),_:1}))]),r("div",It,C(f(S).name),1)],32)],2))}},[["__scopeId","data-v-5166c119"]]);const Bt={class:"links-box",ref:"linksBox"},Dt={__name:"main",setup(s){const o=q(),v=e(35),m=t(),g=e(""),f=e(window.innerWidth);v.value=m.state.config.theme.colsGap||35,a((()=>m.state.config.theme.colsGap),(e=>{v.value=e||35}));let h=!1,y=null;const b=e([]),C=()=>{let e=[];m.state.link.forEach((t=>{if("pageGroup"!==t.type&&!(null==t?void 0:t.pid)){if(t.pageGroup===o.pageGroup)return e.push(t);if(!(""!==o.pageGroup&&null!==o.pageGroup||""!==t.pageGroup&&t.pageGroup))return e.push(t)}})),b.value=Object.assign([],S(e))};return C(),a((()=>m.state.link),C),n((async()=>{Y((()=>{!function(){const e=y.toArray();let t=se(g.value);e.forEach((e=>{let a=t.find(`[data-id='${e}']`);a.length>1&&a.slice(1).remove()}))}()}));const e=e=>{y.toArray().forEach(((e,t)=>{let a=m.state.link.find((t=>t.id===e));a.pid=null,a.pageGroup=o.pageGroup,a.sort=t})),m.commit("updateLink")};let t=g.value;if(t){const a={animation:400,delay:500,delayOnTouchOnly:!0,draggable:".item",dragClass:"opacity-10",chosenClass:"opacity-70",group:{name:"it",pull:function(e){let t=e.el.id;return"icon"!==h.item.dataset.type||"footer-itxst"!==t||"clone"},put:!0},onChoose:function(e){m.state.moveStatus=!0,h=e,window.MoveData={type:e.item.dataset.type,canMove:!1}},onEnd(){m.state.moveStatus=!1},onChange(){window.MoveData.canMove=!1},onMove:function(e){return!e.dragged.dataset.type&&!e.related.dataset.url||("component"===e.dragged.dataset.type?"footerItxst"!==e.to.id:"iconGroup"!==e.related.dataset.url||(!0===window.MoveData.canMove||(window.MoveData.canMove,!1)))},onAdd(t){e(),t.clone.remove(),t.item.remove()},onUpdate:function(t){e()}};y=ee.create(t,a)}})),(e,t)=>(l(),i("div",Bt,[r("div",{style:x({columnGap:(f.value<500?25:v.value)+"px"}),class:"grid itxst gap-y-3 grid-cols-t16 m2k:grid-cols-t14 mxl:grid-cols-t12 mlg:grid-cols-t10 mmd:grid-cols-t8 msm:grid-cols-t6 mxs:grid-cols-t4",ref_key:"itxst",ref:g},[(l(!0),i(c,null,u(b.value,((e,t)=>(l(),d(w,{key:null==e?void 0:e.id},{default:p((()=>["component"===(null==e?void 0:e.type)?(l(),d(Pt,{key:0,info:e,"data-sort":null==e?void 0:e.sort,"data-url":e.component,"data-type":null==e?void 0:e.type,"data-id":null==e?void 0:e.id},null,8,["info","data-sort","data-url","data-type","data-id"])):(null==e?void 0:e.pid)||"icon"!==e.type?k("",!0):(l(),d(Gt,{key:1,data:e,class:"mainBox","data-sort":null==e?void 0:e.sort,"data-type":null==e?void 0:e.type,"data-id":null==e?void 0:e.id},null,8,["data","data-sort","data-type","data-id"]))])),_:2},1024)))),128))],4)],512))}};const Ot=["data-id","data-index"];var At=b({__name:"pageGroup",setup(s){const o=t(),v=G((()=>{let e=[{name:"首页",id:""}];return o.state.link.forEach((t=>{"pageGroup"===t.type&&e.push(t)})),S(e)})),m=e(o.state.pageGroup);let g=null;const y=e(""),k=e(0),b=e("");P.on("cardMouseRight",(e=>{P.emit("deskTopMouseClose"),P.emit("mousePs",{left:e.left,top:e.top,data:Object.assign({},o.state.link.find((t=>t.id===e.data.id)))})}));a((()=>o.state.pageGroup),(e=>{y.value=m.value,m.value=e,(()=>{const e=v.value.findIndex((e=>e.id===m.value));let t="up";t=e>v.value.findIndex((e=>e.id===y.value))?"up":"down";let a=null,s=se(".linkBoxPage").children();for(const o of s)o.dataset.id===m.value&&(a=o);g=a;let n=null;for(const o of s)o.dataset.id===y.value&&(n=o);"up"===t?(se(a).css({transform:"translate3d(0%, 100vh, 0)"}).css({transition:"transform 0.5s",transform:"translate3d(0%, 15px, 0)"}),se(n).css({transform:"translate3d(0%, 15px, 0)"}).css({transition:"transform 0.5s",transform:"translate3d(0%, -100vh, 0)"})):(se(a).css({transform:"translate3d(0%, -100vh, 0)"}).css({transition:"transform 0.5s",transform:"translate3d(0%, 15px, 0)"}),se(n).css({transform:"translate3d(0%, 15px, 0)"}).css({transition:"transform 0.5s",transform:"translate3d(0%, 100vh, 0)"}));for(const o of se(".linkBoxPage").children())o.dataset.index<e&&o!==n&&se(o).css({transition:"none",transform:"translate3d(0%, -100vh, 0)"}),o.dataset.index>e&&o!==n&&se(o).css({transition:"none",transform:"translate3d(0%, 100vh, 0)"})})()})),a((()=>v.value),(e=>{R()}));const C=()=>{let e=document.querySelector(".timeAndSearch").getBoundingClientRect(),t=window.innerHeight-(e.top+e.height);k.value=t-(window.innerWidth<500?0:110)};let _=!1,L=null;const M=e=>{const{scrollHeight:t,clientHeight:a,scrollTop:s}=g;if(e){if(Math.ceil(a+s)<t-1)return!1}else if(s>0)return!1;const n=v.value.findIndex((e=>e.id===m.value));e?n<v.value.length-1&&(o.state.pageGroup=v.value[n+1].id):n>0&&(o.state.pageGroup=v.value[n-1].id)};const E=e=>{const{deltaY:t}=e;return!!(null===L?(L=!1,1):(L&&clearTimeout(L),L=setTimeout((()=>{L=null}),50),0))&&(!_&&(_=!0,M(t>0),void setTimeout((()=>{_=!1}),300)))};let T=0,j=0;function I(e){if(e.touches&&e.touches.length>0){const t=e.touches[0];T=t.clientY}}let B=(new Date).getTime();const D=()=>{B>(new Date).getTime()-300&&(T-j>0&&T-j>=100&&M(!1),T-j<0&&T-j<=-100&&M(!0)),_=!1},O=e=>{if(e.touches&&e.touches.length>0){const t=e.touches[0];j=t.clientY,B=(new Date).getTime()}};let A=null;P.on("upPage",(e=>{console.log("111=》",e),o.state.pageGroup=e}));const R=()=>{let e=null;const t=v.value.findIndex((e=>e.id===m.value));for(const a of se(".linkBoxPage").children())a.dataset.id===m.value&&(e=a),a.dataset.index<t&&se(a).css({transition:"none",transform:"translate3d(0%, -100vh, 0)"}),a.dataset.index>t&&se(a).css({transition:"none",transform:"translate3d(0%, 100vh, 0)"});se(e).css("transform","translate3d(0%, 15px, 0)"),g=e};return n((()=>{R(),C(),window.addEventListener("resize",C),document.querySelector(".linkBoxPage").addEventListener("wheel",E),document.querySelector(".linkBoxPage").addEventListener("touchstart",O),document.querySelector(".linkBoxPage").addEventListener("touchmove",I),document.querySelector(".linkBoxPage").addEventListener("touchend",D),A=setInterval(C,1e3)})),W((()=>{clearInterval(A),document.querySelector(".linkBoxPage").removeEventListener("touchstart",O),document.querySelector(".linkBoxPage").removeEventListener("touchmove",I),document.querySelector(".linkBoxPage").removeEventListener("touchend",D),window.removeEventListener("resize",C),document.querySelector(".linkBoxPage").removeEventListener("wheel",E)})),(e,t)=>(l(),i("div",{class:"flex linkBoxPage",ref_key:"linkBox",ref:b,style:x({height:k.value+"px"})},[(l(!0),i(c,null,u(f(v),((e,t)=>(l(),d(w,{key:e.id},{default:p((()=>[r("div",{class:"pageGroupItem","data-id":e.id,"data-index":t},[h(Dt,{pageGroup:e.id},null,8,["pageGroup"])],8,Ot)])),_:2},1024)))),128))],4))}},[["__scopeId","data-v-48644dd9"]]);const Rt={key:0},zt=["src"],qt=["src"];var Ht=b({__name:"Wallpaper",setup(a){const s=t(),n=e(!1),o=()=>{n.value=!0};s.state.isLogin;const c=R.get("config");return(e,t)=>{var a,u;return f(s).state.configLoad||f(c)?(l(),i("div",Rt,[(null==(a=f(s).state.config.theme)?void 0:a.backgroundMime)&&0!==(null==(u=f(s).state.config.theme)?void 0:u.backgroundMime)?(l(),i("video",{key:1,class:g([{"opacity-0":!1===n.value},"background video-background"]),onPlay:o,controlsList:"nodownload nofullscreen noremoteplayback",src:f(s).state.config.theme.backgroundImage,autoplay:"",loop:"",muted:""},null,42,qt)):(l(),i("img",{key:0,class:"background",src:`${f(s).state.config.theme.backgroundImage}`,alt:""},null,8,zt)),r("div",{class:"backgroundBlur",id:"background",style:x({backdropFilter:`blur(${f(s).state.config.theme.blur}px)`,backgroundColor:`rgba(0,0,0,${f(s).state.config.theme.opacity})`})},null,4)])):k("",!0)}}},[["__scopeId","data-v-304b255b"]]);const Nt={key:0,class:"IndexPage"},Vt={class:"Pages"},Ft={class:"sm:mb-32 flex"},Ut={class:"right-setting-box"},Yt={key:0,src:"/dist/assets/apps.1712150016841.svg",f1:"",title:"组件模式",alt:"标准模式"},Wt={key:1,src:"/dist/assets/light.1712150016841.svg",f0:"",title:"简洁模式",alt:"简约"},Xt=r("img",{style:{width:"28px",height:"28px"},title:"个人控制台",src:"/dist/assets/kongzhi.1712150016841.svg",alt:"user Center"},null,-1),Kt={class:"msm:hidden"},$t={__name:"index",setup(u){const v=e(!0),m=e(),w=e(),b=e(!1),C=()=>{localStorage.getItem("guide")||setTimeout((()=>{b.value=!0}),2e3)},_=()=>{v.value=!1,O((()=>{v.value=!0}))},L=e(!0),G=N((()=>V((()=>import("./deskTopMouse.1712150016841.js")),["assets/deskTopMouse.1712150016841.js","assets/deskTopMouse.1712150016841.css","assets/index.1712150016841.js","assets/index.17121500168415.css","assets/href.1712150016841.js","assets/dialog.1712150016841.js"]))),M=N((()=>V((()=>import("./controller.1712150016841.js")),["assets/controller.1712150016841.js","assets/controller.1712150016841.css","assets/index.1712150016841.js","assets/index.17121500168415.css"]))),S=N((()=>V((()=>import("./mouseMenu.1712150016841.js")),["assets/mouseMenu.1712150016841.js","assets/mouseMenu.1712150016841.css","assets/index.1712150016841.js","assets/index.17121500168415.css","assets/href.1712150016841.js","assets/dialog.1712150016841.js"]))),E=N((()=>V((()=>import("./appSide.1712150016841.js")),["assets/appSide.1712150016841.js","assets/appSide.1712150016841.css","assets/index.1712150016841.js","assets/index.17121500168415.css"]))),T=N((()=>V((()=>import("./iconGroupBox.1712150016841.js")),["assets/iconGroupBox.1712150016841.js","assets/iconGroupBox.1712150016841.css","assets/index.1712150016841.js","assets/index.17121500168415.css","assets/jquery.1712150016841.js","assets/sortable.esm.1712150016841.js","assets/href.1712150016841.js","assets/dialog.1712150016841.js","assets/net.1712150016841.js"]))),j=t(),I=e(!0),B=e(0),D=e(!0),A=()=>{j.commit("pullAll"),j.commit("pullUser")};A();const R=()=>{j.state.config.theme.CompactMode=!j.state.config.theme.CompactMode,j.commit("updateConfig"),H()},z=()=>{I.value=!1,O((()=>{I.value=!0}))};P.on("RefreshLink",z);const q=()=>{D.value=!1,O((e=>{D.value=!0}))},H=()=>{j.state.config.theme.CompactMode?B.value="150px":B.value="0px"};H();const F=()=>{j.state.editStatus&&(j.state.editStatus=!1)},U=()=>{L.value=!1,O((()=>{L.value=!0,A()}))};P.on("reload",U),window.addEventListener("click",F);const Y=e=>{if("F12"===e.key){const{manager:t=0}=j.state.user;0===t&&(e.stopPropagation(),e.preventDefault())}};return n((()=>{window.addEventListener("keydown",Y),X({url:"/Api/globalNotify"}).then((e=>{if(1===e.code){const a=e.data;if(a)try{let e=JSON.parse(a);const{html:t="",title:s="",status:n="0"}=e,{globalNotify:o=""}=localStorage;t!=o&&"1"==n?(K({title:s,dangerouslyUseHTMLString:!0,zIndex:99999,duration:3e4,customClass:"globalNotify",message:t,onClose:()=>{localStorage.setItem("globalNotify",t),C()}}),setTimeout((()=>{localStorage.setItem("globalNotify",t)}),1e3)):C()}catch(t){console.log(t)}}else C()}))})),s((()=>{P.off("reload",U),P.off("RefreshLink",z),window.removeEventListener("click",F),window.removeEventListener("keydown",Y)})),a((()=>j.state.configLoad),(e=>{H()})),a((()=>j.state.user),(e=>{if(1===e.manager){if(sessionStorage.getItem("upGradeVersion"))return;X({url:"/admin.Index/authorization"}).then((e=>{var t,a;if(1===e.code)try{(null==(a=null==(t=e.data)?void 0:t.remote)?void 0:a.released)&&K.success({title:"更新提示！",dangerouslyUseHTMLString:!0,duration:8e3,message:"亲爱的管理员您好<br/>检测到程序有新版本可以更新，<br/>请前往后台管理升级到最新版！"})}catch(s){}})),sessionStorage.setItem("upGradeVersion","1")}})),window.addEventListener("message",(function(e){e.origin!==location.origin&&e.source.postMessage("ACK",{targetOrigin:e.origin})})),(e,t)=>{const a=o("el-button");return l(),i(c,null,[r("div",{class:"indexBody",onContextmenu:t[1]||(t[1]=y((t=>((e,t)=>{const{button:a,clientX:s,clientY:n}=e;2===a&&P.emit("deskTopMouse",{left:s,top:n}),e.stopPropagation()})(t,e.item)),["prevent"]))},[h(Ht),L.value&&f(j).state.configLoad?(l(),i("div",Nt,[r("div",Vt,[r("div",{class:"timeAndSearch",style:x({marginTop:B.value,transition:"all .5s"})},[h(Ge,{onChange:R}),h(wt)],4),r("div",Ft,[!f(j).state.config.theme.CompactMode&&I.value?(l(),d(At,{key:0})):k("",!0)])]),r("div",Ut,[h(a,{onClick:R,class:"fixed-jianjie",ref_key:"ref1",ref:m},{default:p((()=>[f(j).state.config.theme.CompactMode?(l(),i("img",Yt)):(l(),i("img",Wt))])),_:1},512),h(a,{ref_key:"ref2",ref:w,onClick:t[0]||(t[0]=e=>f(Z)("tab://setting")),class:"fixed-setting ml-4"},{default:p((()=>[Xt])),_:1},512)])])):k("",!0)],32),f(j).state.configLoad?(l(),d(Je,{key:0,class:g({"justify-center text-center":!f(j).state.config.theme.tabbar||!D.value||f(j).state.config.theme.CompactMode||!f(j).state.configLoad||!I.value})},null,8,["class"])):k("",!0),r("div",Kt,[f(j).state.config.theme.tabbar&&D.value&&!f(j).state.config.theme.CompactMode&&f(j).state.configLoad&&I.value?(l(),d(be,{key:0,reload:q})):k("",!0)]),!f(j).state.config.theme.CompactMode&&f(j).state.config.theme.pageGroup&&v.value&&f(j).state.configLoad?(l(),d(He,{key:1,reload:_})):k("",!0),h(f(E)),h(f(M)),h(f(S)),h(f(G)),h(f(T))],64)}}};var Jt=Object.freeze(Object.defineProperty({__proto__:null,default:$t},Symbol.toStringTag,{value:"Module"}));export{Gt as _,Jt as i};

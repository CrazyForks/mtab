import{u as e,r as l,w as s,ab as a,p as t,o,b as n,c as i,d as u,k as d,h as r,e as c,j as p,ae as m,$ as v,t as g,i as x,X as h,af as f,m as w,T as k,V as _,W as y,J as b,l as V,B as C,C as L,P as j,g as U,ad as S,ag as O}from"./index.1705154127287.js";const P={class:"userLogin"},B={key:0,class:"loginPage"},E={class:"loginCard"},I={class:"rightLogin"},M={class:"text-lg font-bold mb-6 flex items-center"},z={key:0,class:"mt-3 login"},K={class:"input_div"},T=c("div",{class:"input_title"}," 邮箱账号 ",-1),A=c("div",{class:"input_title mt-3"}," 登录密码 ",-1),D=["onKeyup"],G={class:"flex mt-4"},R=c("hr",{class:"mt-6 mb-6 hr-login"},null,-1),F={class:"flex"},H={key:1,class:"mt-3 register"},J={class:"input_div"},W=c("div",{class:"input_title"}," 邮箱账号 ",-1),X=c("div",{class:"input_title mt-3"}," 注册密码 ",-1),$=["onKeyup"],q=c("div",{class:"input_title mt-3"}," 验证码 ",-1),N={class:"flex gap-4"},Q={key:1,class:"SmsCodeButton"},Y={class:"flex mt-4"},Z=c("hr",{class:"mt-6 mb-6 hr-login"},null,-1),ee={class:"flex"},le={key:2,class:"mt-3 register"},se={class:"input_div"},ae=c("div",{class:"input_title"}," 邮箱账号 ",-1),te=c("div",{class:"input_title mt-3"}," 新密码 ",-1),oe=c("div",{class:"input_title mt-3"}," 邮件验证码 ",-1),ne={class:"flex gap-4"},ie={key:1,class:"SmsCodeButton"},ue={class:"flex mt-4"},de=c("hr",{class:"mt-6 mb-6 hr-login"},null,-1),re={class:"flex"},ce={__name:"userLogin",setup(V){const C=e(),L=l(1),j=l(60),U=l(!1);s(U,(e=>{document.body.style.overflow=e?"hidden":"scroll"}));const S=()=>{U.value=!1},O=a({username:"",password:""}),ce=a({username:"",password:"",code:""}),pe=a({username:"",password:"",code:""}),me=()=>{_({url:"/user/forgetPass",method:"post",data:{username:pe.username,password:pe.password,code:pe.code}}).then((e=>{1===e.code?(O.username=pe.username,O.password=pe.password,y.success("重置成功,已为您自动登录"),ge()):y.error(e.msg)}))},ve=()=>{_({url:"/user/register",method:"post",data:{username:ce.username,password:ce.password,code:ce.code}}).then((e=>{1===e.code?(O.username=ce.username,O.password=ce.password,y.success("从现在起你就是我的主人了,已为您自动登录"),ge()):y.error(e.msg)}))},ge=()=>{_({url:"/user/login",method:"post",data:{username:O.username,password:O.password}}).then((e=>{if(1===e.code){const{user_id:l,token:s}=e.data;b.set("token",s).set("user_id",l),C.dispatch("loginIn"),U.value=!1}else y.error(e.msg)}))},xe=e=>{_({url:"/api/getMailCode",method:"post",data:{mail:e}}).then((e=>{if(1===e.code){y.success(e.msg);let l=setInterval((()=>{j.value-=1,j.value<=0&&(clearInterval(l),j.value=60)}),1e3)}else y.error(e.msg)}))},he=(e=1)=>{L.value=e,U.value=!0};return t.on("openLogin",he),o((()=>{t.off("openLogin",he)})),(e,l)=>{const s=n("el-icon");return i(),u("div",P,[d(k,{name:"loginFade"},{default:r((()=>[U.value?(i(),u("div",B,[c("div",E,[c("div",I,[d(s,{onClick:S,size:"25px",class:"closeLogin"},{default:r((()=>[d(p(m))])),_:1}),c("h2",M,[c("img",{class:"loginIco",src:"/favicon",alt:""}),v(" "+g(["登录","注册","重置"][L.value-1])+"您的账户 ",1)]),1===L.value?(i(),u("div",z,[c("div",K,[T,x(c("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>O.username=e),class:"inputLogin",placeholder:"请输入邮箱"},null,512),[[h,O.username]]),A,x(c("input",{type:"password","onUpdate:modelValue":l[1]||(l[1]=e=>O.password=e),placeholder:"请输入6-18位密码",class:"inputLogin",onKeyup:f(ge,["enter"])},null,40,D),[[h,O.password]])]),c("div",G,[c("span",{class:"hover text-blue-500 ml-auto text-sm",onClick:l[2]||(l[2]=e=>L.value=3)},"忘记密码？")]),c("div",{class:"mt-4 flex"},[c("button",{class:"loginBtn",onClick:ge}," 登录 ")]),R,c("div",F,[c("div",{class:"text-gray-500 text-sm m-auto cursor-pointer",onClick:l[3]||(l[3]=e=>L.value=2)},"还没有账号？去注册")])])):w("",!0),2===L.value?(i(),u("div",H,[c("div",J,[W,x(c("input",{class:"inputLogin","onUpdate:modelValue":l[4]||(l[4]=e=>ce.username=e),placeholder:"请输入邮箱"},null,512),[[h,ce.username]]),X,x(c("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>ce.password=e),placeholder:"请输入6-18位密码",class:"inputLogin",type:"password",onKeyup:f(ge,["enter"])},null,40,$),[[h,ce.password]]),q,c("div",N,[x(c("input",{type:"number",class:"inputLogin","onUpdate:modelValue":l[6]||(l[6]=e=>ce.code=e),placeholder:"请输入验证码"},null,512),[[h,ce.code]]),60===j.value?(i(),u("button",{key:0,class:"SmsCodeButton",onClickOnce:l[7]||(l[7]=e=>xe(ce.username))},"获取 ",32)):(i(),u("button",Q,g(j.value)+"s",1))])]),c("div",Y,[c("span",{class:"hover text-blue-500 ml-auto text-sm",onClick:l[8]||(l[8]=e=>L.value=1)},"已有账号？去登录")]),c("div",{class:"mt-4 flex"},[c("button",{class:"loginBtn",onClick:ve}," 提交注册 ")]),Z,c("div",ee,[c("div",{class:"text-gray-500 text-sm m-auto cursor-pointer",onClick:l[9]||(l[9]=e=>L.value=3)},"忘记密码？去找回")])])):w("",!0),3===L.value?(i(),u("div",le,[c("div",se,[ae,x(c("input",{class:"inputLogin","onUpdate:modelValue":l[10]||(l[10]=e=>pe.username=e),placeholder:"请输入邮箱"},null,512),[[h,pe.username]]),te,x(c("input",{"onUpdate:modelValue":l[11]||(l[11]=e=>pe.password=e),placeholder:"请输入6-18位密码",type:"password",class:"inputLogin"},null,512),[[h,pe.password]]),oe,c("div",ne,[x(c("input",{type:"number",class:"inputLogin","onUpdate:modelValue":l[12]||(l[12]=e=>pe.code=e),placeholder:"请输入验证码"},null,512),[[h,pe.code]]),60===j.value?(i(),u("button",{key:0,class:"SmsCodeButton",onClickOnce:l[13]||(l[13]=e=>xe(pe.username))},"获取 ",32)):(i(),u("button",ie,g(j.value)+"s",1))])]),c("div",ue,[c("span",{class:"hover text-blue-500 ml-auto text-sm",onClick:l[14]||(l[14]=e=>L.value=1)},"已有账号？去登录")]),c("div",{class:"mt-4 flex"},[c("button",{class:"loginBtn",onClick:me}," 提交 ")]),de,c("div",re,[c("div",{class:"text-gray-500 text-sm m-auto cursor-pointer",onClick:l[15]||(l[15]=e=>L.value=2)},"还没有账号？去注册")])])):w("",!0)])])])):w("",!0)])),_:1})])}}},pe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0;return("x"==e?l:3&l|8).toString(16)})),me={class:"linkEdit"},ve={class:"grid grid-rows-1 grid-cols-5"},ge={class:"space-y-4 col-span-3"},xe={class:"col-span-2 ml-3"},he=["src"],fe={class:"flex mt-3"},we={__name:"linkEdit",setup(s){const a=window.isMobile,m=l(!1),g=e(),x={id:"",name:"",src:"",url:"",size:"1x1",type:"icon"},h=l(Object.assign({},x)),f=e=>{1==e.code&&(h.value.src=e.url)},w=()=>{if(""==h.value.id)h.value.id=pe(),g.state.link.push(h.value);else{const e=g.state.link.findIndex((e=>e.id==h.value.id));g.state.link[e]=h.value}g.commit("updateLink",g.state.link),m.value=!1};return t.on("linkEdit",((e=!1)=>{h.value=Object.assign({},x),e&&(h.value=e),m.value=!0})),o((()=>{t.off("linkEdit".open)})),(e,l)=>{const s=n("el-input"),t=n("el-button"),o=n("el-upload"),x=n("el-dialog");return i(),u("div",me,[d(x,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),"close-on-click-modal":!1,width:p(a)?"350px":"600px",title:"编辑标签"},{default:r((()=>[c("div",ve,[c("div",ge,[c("div",null,[d(s,{modelValue:h.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value.name=e),placeholder:"标签名称"},null,8,["modelValue"])]),c("div",null,[d(s,{modelValue:h.value.url,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value.url=e),placeholder:"标签url"},{append:r((()=>[d(t,{type:"primary"},{default:r((()=>[v("获取图标")])),_:1})])),_:1},8,["modelValue"])]),c("div",null,[d(s,{modelValue:h.value.src,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value.src=e),placeholder:"标签图标地址"},{append:r((()=>[d(o,{class:"upload-demo","show-file-list":!1,"on-success":f,action:p(g).state.site.upload},{default:r((()=>[d(t,{type:"primary"},{default:r((()=>[v("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])]),c("div",xe,[c("img",{src:h.value.src,class:"w-9/12 rounded-2xl"},null,8,he)])]),c("div",fe,[d(t,{class:"ml-auto bg-blue-400",type:"primary",onClick:V(w,["stop"])},{default:r((()=>[v("保存")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","width"])])}}},ke={iconGroup:C((()=>L((()=>import("./iconGroup.1705154127287.js")),["assets/iconGroup.1705154127287.js","assets/iconGroup.1705154127287.css","assets/index.1705154127287.js","assets/index.17051541272874.css","assets/jquery.1705154127287.js"]))),addicon:C((()=>L((()=>import("./addicon.1705154127287.js")),["assets/addicon.1705154127287.js","assets/addicon.1705154127287.css","assets/index.1705154127287.js","assets/index.17051541272874.css"])))};const _e={key:0,class:"framer"},ye=[c("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M8 8L40 40",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M8 40L40 8",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1)],be={class:"componentView"},Ve={__name:"framer",setup(e){const s=l(!1),a=l({}),m=l(null);let v={width:"1000px",height:"500px"};const g=l(Object.assign({},v)),x=j(ke.note),h=e=>{const{size:l=!1}=e;l?(g.value.width=l.width,g.value.height=l.height):g.value=Object.assign({},v),O("--frameHeight",g.value.height),x.value=ke[e.component];const{data:t={}}=e;a.value=t,s.value=!0},f=()=>{s.value=!1},k=e=>{s.value=!1,e()};return t.on("openPlugin",h),t.on("closePlugin",f),o((()=>{t.off("openPlugin",h),t.off("closePlugin",f)})),(e,l)=>{const t=n("el-dialog");return s.value?(i(),u("div",_e,[d(t,{modal:!1,modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:g.value.width,"before-close":k,class:"framerAlert",ref_key:"framers",ref:m,draggable:""},{header:r((()=>[c("div",{class:"flex justify-end"},[c("div",{class:"cursor-pointer windowController windowclose",onClick:f,title:"关闭窗口"},ye)])])),default:r((()=>[c("div",be,[(i(),U(S(p(x)),{data:a.value,onClose:f},null,40,["data"]))])])),_:1},8,["modelValue","width"])])):w("",!0)}}};const Ce={class:"appSide"},Le={__name:"appSide",setup:l=>(e(),(e,l)=>(i(),u("div",Ce,[d(ce),d(we),d(Ve)])))};var je=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"}));export{je as a,pe as u};

import{u as e,a0 as a,r as t,a as o,ao as d,E as n,o as l,b as r,c as s,d as u,e as i,k as p,l as m,F as c,f,g as v,h as g,T as y,j as G,A as j,m as x}from"./index.1711290598880.js";import{_ as h}from"./index.17112905988802.js";import{$ as k}from"./jquery.1711290598880.js";import{S as C}from"./sortable.esm.1711290598880.js";import"./href.1711290598880.js";import"./dialog.1711290598880.js";import"./net.1711290598880.js";const T=["onClick"],B={__name:"GroupItem",props:{data:Object,reload:Function},setup(x){const B=x,_=e(),b=a([]),I=t(),w=t({});window.$=k;const D=()=>{_.state.editStatus&&(_.state.editStatus=!1)};let O=!0;const A=()=>{_.commit("setLink",w.value),k(`[data-id='${I.value}']`).find(".names").text(w.value.name)};let E=null;const S=()=>{const e=E.toArray();let a=[];e.forEach(((e,t)=>{let o=_.getters.find(e);o.pid=I.value,o.sort=t,a.push(o)})),_.commit("updateDiffLink",Object.assign([],a)),"add"===B.data.type&&(clearTimeout(V),B.reload())};let V=setTimeout((()=>{}));o((()=>{var e,a;V=setTimeout((()=>{"add"===B.data.type&&O&&(clearTimeout(V),B.reload())}),2e3),I.value=B.data.pid,w.value=_.getters.find(B.data.pid),b.value=d([],_.getters.findChildren(B.data.pid)),e=document.getElementById("iconGroupItem"),a={animation:200,delay:500,delayOnTouchOnly:!0,draggable:".item",group:{name:"it",pull:function(e){return!0},put:!0},onChoose:function(e){window.MoveData={type:e.item.dataset.type}},onMove:function(e){return!e.dragged.dataset.type&&!e.related.dataset.url||"component"===e.dragged.dataset.type||"iconGroup"!==e.related.dataset.url},onUpdate(e){S()},onAdd(e){S()}},E=C.create(e,a)}));const F=()=>{b.value=d([],_.getters.findChildren(B.data.pid))};return n.on("refreshGroup",F),l((()=>{n.off("refreshGroup",F),n.off("saveGroup",S)})),(e,a)=>{const t=r("el-input");return s(),u("div",{id:"iconGroupBox",onContextmenu:a[5]||(a[5]=m((()=>{}),["prevent"])),onClick:a[6]||(a[6]=(...e)=>B.reload&&B.reload(...e))},[i("div",{class:"groupName",onClick:a[1]||(a[1]=m((()=>{}),["stop"]))},[p(t,{onBlur:A,modelValue:w.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.name=e)},null,8,["modelValue"])]),i("div",{class:"model",onDragleave:a[3]||(a[3]=e=>{"model"===e.relatedTarget.className&&(O=!0,clearTimeout(V),B.reload())}),onDragenter:a[4]||(a[4]=e=>{"iconGroupBox"===e.relatedTarget.id&&(O=!1)})},[i("div",{id:"iconGroupItem",class:"iconGroupItem",onClick:m(D,["stop"])},[(s(!0),u(c,null,f(G(j)(G(b)),(e=>(s(),v(y,{key:e.id},{default:g((()=>[p(h,{onClick:a[2]||(a[2]=m((()=>{}),["stop"])),data:e,"data-type":null==e?void 0:e.type,"data-id":null==e?void 0:e.id},null,8,["data","data-type","data-id"])])),_:2},1024)))),128))],8,T)],32)],32)}}};const _={__name:"iconGroupBox",setup(e){const a=t(!1),o=t(),d=e=>{o.value=e,a.value=!0},r=()=>{a.value=!1};return n.on("addGroupBox",d),l((()=>{n.off("addGroupBox",d)})),(e,t)=>(s(),u("div",null,[p(y,{name:"groupBox"},{default:g((()=>[a.value?(s(),v(B,{key:0,data:o.value,reload:r},null,8,["data"])):x("",!0)])),_:1})]))}};export{_ as default};

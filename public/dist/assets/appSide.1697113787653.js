import{u as e,r as l,a7 as a,p as s,o,b as t,c as d,d as u,k as r,h as n,e as i,aa as c,W as p,m,g as v,t as w,S as f,U as h,H as k,j as g,l as x,B as V,C as _,N as y,i as b,v as j,a9 as C,ab as S}from"./index.1697113787653.js";const U={class:"userlogin"},M={key:0,class:"-mt-3 login"},E={class:"input_div"},O={class:"flex justify-between mt-2"},F={class:"mt-4 flex"},L={key:1,class:"-mt-3 register"},P={class:"input_div"},z={class:"flex justify-between mt-2"},H={class:"mt-4 flex"},I={key:2,class:"-mt-3 register"},q={class:"input_div"},R={class:"flex justify-between mt-2"},A={class:"mt-4 flex"},K={__name:"userLogin",setup(g){const x=e(),V=l(1),_=l(60),y=l(!1),b=a({username:"",password:""}),j=a({username:"",password:"",code:""}),C=a({username:"",password:"",code:""}),S=()=>{f({url:"/user/forgetPass",method:"post",data:{username:C.username,password:C.password,code:C.code}}).then((e=>{1===e.code?(b.username=C.username,b.password=C.password,h.success("重置成功,已为您自动登录"),B()):h.error(e.msg)}))},K=()=>{f({url:"/user/register",method:"post",data:{username:j.username,password:j.password,code:j.code}}).then((e=>{1===e.code?(b.username=j.username,b.password=j.password,h.success("从现在起你就是我的主人了,已为您自动登录"),B()):h.error(e.msg)}))},B=()=>{f({url:"/user/login",method:"post",data:{username:b.username,password:b.password}}).then((e=>{if(1===e.code){const{user_id:l,token:a}=e.data;k.set("token",a).set("user_id",l),x.dispatch("loginIn"),y.value=!1}else h.error(e.msg)}))},T=e=>{f({url:"/api/getMailCode",method:"post",data:{mail:e}}).then((e=>{if(1===e.code){h.success(e.msg);let l=setInterval((()=>{_.value-=1,_.value<=0&&(clearInterval(l),_.value=60)}),1e3)}else h.error(e.msg)}))},D=(e=1)=>{V.value=e,y.value=!0};return s.on("openLogin",D),o((()=>{s.off("openLogin",D)})),(e,l)=>{const a=t("el-input"),s=t("el-button"),o=t("el-dialog");return d(),u("div",U,[r(o,{modelValue:y.value,"onUpdate:modelValue":l[14]||(l[14]=e=>y.value=e),"close-on-click-modal":!1,title:["用户登录","用户注册","重置密码"][V.value-1],width:"350px"},{default:n((()=>[1==V.value?(d(),u("div",M,[i("div",E,[r(a,{modelValue:b.username,"onUpdate:modelValue":l[0]||(l[0]=e=>b.username=e),placeholder:"请输入邮箱（用于数据同步和通知）",clearable:""},null,8,["modelValue"]),r(a,{modelValue:b.password,"onUpdate:modelValue":l[1]||(l[1]=e=>b.password=e),placeholder:"请输入6-18位密码",class:"mt-4","show-password":"",onKeyup:c(B,["enter"])},null,8,["modelValue","onKeyup"])]),i("div",O,[i("span",{class:"text-blue-400 hover",onClick:l[2]||(l[2]=e=>V.value=2)},"注册账号"),i("span",{class:"hover",onClick:l[3]||(l[3]=e=>V.value=3)},"忘记密码")]),i("div",F,[r(s,{class:"rounded-full bg-blue-400 w-full",type:"primary",onClick:B},{default:n((()=>[p(" 登录 ")])),_:1})])])):m("",!0),2==V.value?(d(),u("div",L,[i("div",P,[r(a,{modelValue:j.username,"onUpdate:modelValue":l[4]||(l[4]=e=>j.username=e),placeholder:"请输入邮箱（用于数据同步和通知）",clearable:""},null,8,["modelValue"]),r(a,{modelValue:j.code,"onUpdate:modelValue":l[6]||(l[6]=e=>j.code=e),placeholder:"请输入验证码",class:"mt-4",clearable:""},{append:n((()=>[60==_.value?(d(),v(s,{key:0,onClickOnce:l[5]||(l[5]=e=>T(j.username))},{default:n((()=>[p("获取")])),_:1})):(d(),v(s,{key:1},{default:n((()=>[p(w(_.value)+"s",1)])),_:1}))])),_:1},8,["modelValue"]),r(a,{modelValue:j.password,"onUpdate:modelValue":l[7]||(l[7]=e=>j.password=e),placeholder:"请输入6-18位密码",class:"mt-4","show-password":"",onKeyup:c(B,["enter"])},null,8,["modelValue","onKeyup"])]),i("div",z,[i("span",{class:"text-blue-400 hover",onClick:l[8]||(l[8]=e=>V.value=1)},"已有账号去登录")]),i("div",H,[r(s,{class:"rounded-full bg-blue-400 w-full",type:"primary",onClick:K},{default:n((()=>[p(" 注册 ")])),_:1})])])):m("",!0),3==V.value?(d(),u("div",I,[i("div",q,[r(a,{modelValue:C.username,"onUpdate:modelValue":l[9]||(l[9]=e=>C.username=e),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"]),r(a,{modelValue:C.code,"onUpdate:modelValue":l[11]||(l[11]=e=>C.code=e),placeholder:"请输入验证码",class:"mt-4",clearable:""},{append:n((()=>[60==_.value?(d(),v(s,{key:0,onClickOnce:l[10]||(l[10]=e=>T(C.username))},{default:n((()=>[p("获取")])),_:1})):(d(),v(s,{key:1},{default:n((()=>[p(w(_.value)+"s",1)])),_:1}))])),_:1},8,["modelValue"]),r(a,{modelValue:C.password,"onUpdate:modelValue":l[12]||(l[12]=e=>C.password=e),placeholder:"请输入6-18位密码",class:"mt-4","show-password":""},null,8,["modelValue"])]),i("div",R,[i("span",{class:"text-blue-400 hover",onClick:l[13]||(l[13]=e=>V.value=1)},"已有账号去登录")]),i("div",A,[r(s,{class:"rounded-full bg-blue-400 w-full",type:"primary",onClick:S},{default:n((()=>[p(" 提交 ")])),_:1})])])):m("",!0)])),_:1},8,["modelValue","title"])])}}},B=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0;return("x"==e?l:3&l|8).toString(16)})),T={class:"linkEdit"},D={class:"grid grid-rows-1 grid-cols-5"},G={class:"space-y-4 col-span-3"},N={class:"col-span-2 ml-3"},W=["src"],J={class:"flex mt-3"},Q={__name:"linkEdit",setup(a){const c=window.isMobile,m=l(!1),v=e(),w={id:"",name:"",src:"",url:"",size:"1x1",type:"icon"},f=l(Object.assign({},w)),h=e=>{1==e.code&&(f.value.src=e.url)},k=()=>{if(""==f.value.id)f.value.id=B(),v.state.link.push(f.value);else{const e=v.state.link.findIndex((e=>e.id==f.value.id));v.state.link[e]=f.value}v.commit("updateLink",v.state.link),m.value=!1};return s.on("linkEdit",((e=!1)=>{f.value=Object.assign({},w),e&&(f.value=e),m.value=!0})),o((()=>{s.off("linkEdit".open)})),(e,l)=>{const a=t("el-input"),s=t("el-button"),o=t("el-upload"),w=t("el-dialog");return d(),u("div",T,[r(w,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),"close-on-click-modal":!1,width:g(c)?"350px":"600px",title:"编辑标签"},{default:n((()=>[i("div",D,[i("div",G,[i("div",null,[r(a,{modelValue:f.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>f.value.name=e),placeholder:"标签名称"},null,8,["modelValue"])]),i("div",null,[r(a,{modelValue:f.value.url,"onUpdate:modelValue":l[1]||(l[1]=e=>f.value.url=e),placeholder:"标签url"},{append:n((()=>[r(s,{type:"primary"},{default:n((()=>[p("获取图标")])),_:1})])),_:1},8,["modelValue"])]),i("div",null,[r(a,{modelValue:f.value.src,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value.src=e),placeholder:"标签图标地址"},{append:n((()=>[r(o,{class:"upload-demo","show-file-list":!1,"on-success":h,action:g(v).state.site.upload},{default:n((()=>[r(s,{type:"primary"},{default:n((()=>[p("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])]),i("div",N,[i("img",{src:f.value.src,class:"w-9/12 rounded-2xl"},null,8,W)])]),i("div",J,[r(s,{class:"ml-auto bg-blue-400",type:"primary",onClick:x(k,["stop"])},{default:n((()=>[p("保存")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","width"])])}}},X={iconGroup:V((()=>_((()=>import("./iconGroup.1697113787653.js")),["assets/iconGroup.1697113787653.js","assets/iconGroup.1697113787653.css","assets/index.1697113787653.js","assets/index.16971137876534.css","assets/jquery.1697113787653.js"]))),addicon:V((()=>_((()=>import("./addicon.1697113787653.js")),["assets/addicon.1697113787653.js","assets/addicon.1697113787653.css","assets/index.1697113787653.js","assets/index.16971137876534.css"])))};const Y={key:0,class:"framer"},Z={class:"flex justify-end"},$=[i("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M33 6H42V15",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M42 33V42H33",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M15 42H6V33",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M6 15V6H15",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1)],ee=[i("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M8 8L40 40",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M8 40L40 8",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1)],le={class:"componentView"},ae={__name:"framer",setup(e){const a=l(!1),c=l({}),p=l(!0);let w=!1;const f=l(null);let h={width:"800px",height:"500px"};const k=()=>{if(0==w){const e=document.querySelector(".framerAlert");(e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen).call(e),w=!0}else{(document.exitFullScreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen).call(document),w=!1}},V=l(Object.assign({},h)),_=y(X.note),U=e=>{const{full:l=!0}=e;p.value=l;const{size:s=!1}=e;s?(V.value.width=s.width,V.value.height=s.height):V.value=Object.assign({},h),S("--frameHeight",V.value.height),_.value=X[e.component];const{data:o={}}=e;c.value=o,a.value=!0},M=()=>{a.value=!1},E=e=>{a.value=!1,e()};return s.on("openPlugin",U),s.on("closePlugin",M),o((()=>{s.off("openPlugin",U),s.off("closePlugin",M)})),(e,l)=>{const s=t("el-dialog");return a.value?(d(),u("div",Y,[r(s,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:V.value.width,"before-close":E,class:"framerAlert",ref_key:"framers",ref:f,draggable:""},{header:n((()=>[i("div",Z,[b(i("div",{size:"30px",class:"cursor-pointer windowController windowfull",onClick:k,onMousemove:l[0]||(l[0]=x((()=>{}),["stop"])),title:"全屏"},$,544),[[j,p.value]]),i("div",{size:"30px",class:"cursor-pointer windowController windowclose",onClick:M,title:"关闭窗口"},ee)])])),default:n((()=>[i("div",le,[(d(),v(C(g(_)),{data:c.value,onClose:M},null,40,["data"]))])])),_:1},8,["modelValue","width"])])):m("",!0)}}};const se={class:"appSide"},oe={__name:"appSide",setup:l=>(e(),(e,l)=>(d(),u("div",se,[r(K),r(Q),r(ae)])))};var te=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{te as a,B as u};

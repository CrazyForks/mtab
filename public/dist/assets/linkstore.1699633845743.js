import{r as e,u as l,b as a,c as t,d as o,e as u,k as d,h as n,S as i,F as r,f as s,g as p,X as m,t as c,j as v,Q as h,a6 as f,Y as g}from"./index.1699633845743.js";const w={class:"linkstoreAdmin"},V={class:"p-4 bg-white rounded-lg overflow-hidden flex flex-wrap gap-4"},b={class:"ml-auto"},_={class:"mt-4 p-4 bg-white rounded-lg overflow-hidden w-full"},y=["src"],k={class:"folderManager"},x={class:"flex w-full mt-6"},C={class:"flex mt-6"},U={__name:"linkstore",setup(U){const j={id:"",name:"",sort:""},O=e(Object.assign({},j)),S=e([]),z=()=>{i({url:"/linkStore/getFolder"}).then((e=>{S.value=e.data}))};z();const A=e({name:"",area:""}),F=(e="")=>{e=e.split(",");const l=[];return e.forEach((e=>{const a=S.value.find((l=>l.id.toString()===e));a&&l.push(a.name)})),l.join(",")},L=e(!1),D=e(!1),I=l(),M=e(!1),P=e({}),W=()=>{P.value={},M.value=!0},E=()=>{D.value=!0},G=(e={})=>{O.value=0===e?Object.assign({},j):Object.assign({},e),L.value=!0},Q=()=>{i({url:"/linkStore/createFolder",method:"post",data:{type:"edit",info:O.value}}).then((e=>{f.success(e.msg),1===e.code&&(z(),L.value=!1)}))},R=e=>{1===e.code&&(P.value.src=e.data.url)},X=()=>{let e=Object.assign({},P.value);e.area=e.area.join(","),i({url:"/linkStore/add",method:"post",data:{form:e}}).then((e=>{f.success(e.msg),M.value=!1,q()}))},Y=e({current_page:1,per_page:15,total:0,refresh(e){Y.value.current_page=e,q()}}),$=e([]),q=()=>{i({url:"/LinkStore/ListManager",method:"post",data:{search:A.value,page:Y.value.current_page,limit:Y.value.per_page}}).then((e=>{$.value=e.data.data,Object.assign(Y.value,e.data)}))};return q(),(e,l)=>{const U=a("el-input"),j=a("el-option"),B=a("el-select"),H=a("el-button"),J=a("el-table-column"),K=a("el-tag"),N=a("el-table"),T=a("el-pagination"),Z=a("el-form-item"),ee=a("el-upload"),le=a("el-switch"),ae=a("el-input-number"),te=a("el-form"),oe=a("el-dialog");return t(),o("div",w,[u("div",V,[d(U,{modelValue:A.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>A.value.name=e),style:{width:"200px"},placeholder:"名称搜索",clearable:""},null,8,["modelValue"]),d(B,{modelValue:A.value.area,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value.area=e),style:{width:"200px"},placeholder:"分类搜索",clearable:""},{default:n((()=>[(t(!0),o(r,null,s(S.value,(e=>(t(),p(j,{value:e.id,label:e.name},null,8,["value","label"])))),256))])),_:1},8,["modelValue"]),d(H,{onClick:q,type:"primary"},{default:n((()=>[m("搜索")])),_:1}),d(H,{type:"danger",onClick:W},{default:n((()=>[m("添加新标签")])),_:1}),u("div",b,[d(H,{type:"info",onClick:E},{default:n((()=>[m("标签分类管理")])),_:1})])]),u("div",_,[d(N,{height:"calc(100vh - 203px)",stripe:"",data:$.value},{default:n((()=>[d(J,{fixed:"left",prop:"id",label:"ID",align:"center",width:"100"}),d(J,{prop:"name",label:"网站名称",align:"center",width:"200"}),d(J,{prop:"src",label:"LOGO",align:"center",width:"80"},{default:n((e=>[u("img",{src:e.row.src,class:"logoiconRadius",alt:"Logo",style:{"max-width":"100%","max-height":"100%"}},null,8,y)])),_:1}),d(J,{prop:"url","show-overflow-tooltip":"",label:"域名链接",align:"center",width:"260"}),d(J,{prop:"domain",label:"Domain",align:"center",width:"260"}),d(J,{prop:"app",label:"是否WebApp",align:"center",width:"140"},{default:n((e=>[1===e.row.app?(t(),p(K,{key:0},{default:n((()=>[m("WebApp")])),_:1})):(t(),p(K,{key:1,type:"info"},{default:n((()=>[m("标签")])),_:1}))])),_:1}),d(J,{prop:"area",width:"200px","show-overflow-tooltip":"",label:"分类",align:"center"},{default:n((e=>[m(c(F(e.row.area)),1)])),_:1}),d(J,{prop:"tips",label:"简介",align:"center",width:"300"}),d(J,{prop:"install_num",label:"安装量(次)",align:"center",width:"100"}),d(J,{prop:"create_time",label:"创建时间",align:"center",width:"200"}),d(J,{fixed:"right",label:"操作",align:"center",width:"150"},{default:n((e=>[d(H,{type:"primary",size:"small",onClick:l=>(e=>{P.value=Object.assign({},e);const l=e.area.split(",");l.length>0&&""!==l[0]?P.value.area=l:P.value.area=[],M.value=!0})(e.row)},{default:n((()=>[m("操作")])),_:2},1032,["onClick"]),d(H,{type:"danger",size:"small",onClick:l=>{return a=e.row.id,void g.confirm("是否批量删除","删除提示").then((e=>{i({url:"/linkStore/del",method:"post",data:{ids:[a]}}).then((e=>{f.success(e.msg),q()}))})).catch();var a}},{default:n((()=>[m("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),d(T,{onCurrentChange:Y.value.refresh,"page-size":15,class:"mt-6",layout:"total,prev, pager, next",total:Y.value.total},null,8,["onCurrentChange","total"])]),d(oe,{modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=e=>M.value=e),title:"编辑标签",size:"400px","close-on-click-modal":!1,top:"5vh"},{default:n((()=>[d(te,{modelValue:P.value,"onUpdate:modelValue":l[11]||(l[11]=e=>P.value=e),"label-position":"top"},{default:n((()=>[d(Z,{label:"名称"},{default:n((()=>[d(U,{modelValue:P.value.name,"onUpdate:modelValue":l[2]||(l[2]=e=>P.value.name=e),"show-word-limit":"",maxlength:"50",placeholder:"请输入网站title或名称"},null,8,["modelValue"])])),_:1}),d(Z,{label:"logo"},{default:n((()=>[d(U,{modelValue:P.value.src,"onUpdate:modelValue":l[3]||(l[3]=e=>P.value.src=e),placeholder:"标签图标地址(120x120)px尺寸最佳"},{append:n((()=>[d(ee,{class:"upload-demo","show-file-list":!1,"on-success":R,action:v(h)+v(I).state.site.upload},{default:n((()=>[d(H,{type:"primary"},{default:n((()=>[m("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])),_:1}),d(Z,{label:"域名"},{default:n((()=>[d(U,{modelValue:P.value.domain,"onUpdate:modelValue":l[4]||(l[4]=e=>P.value.domain=e),"show-word-limit":"",maxlength:"251",placeholder:"请输入域名多个可以用,隔开。域名不要携带http协议"},null,8,["modelValue"])])),_:1}),d(Z,{label:"网址"},{default:n((()=>[d(U,{modelValue:P.value.url,"onUpdate:modelValue":l[5]||(l[5]=e=>P.value.url=e),"show-word-limit":"",maxlength:"251",placeholder:"请输入网址,请携带http协议"},null,8,["modelValue"])])),_:1}),d(Z,{label:"分类"},{default:n((()=>[d(B,{modelValue:P.value.area,"onUpdate:modelValue":l[6]||(l[6]=e=>P.value.area=e),multiple:!0,placeholder:"分类选择可多选",class:"w-full"},{default:n((()=>[(t(!0),o(r,null,s(S.value,(e=>(t(),p(j,{key:e.id,label:e.name,value:`${e.id}`},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(Z,{label:"简介"},{default:n((()=>[d(U,{modelValue:P.value.tips,"onUpdate:modelValue":l[7]||(l[7]=e=>P.value.tips=e),placeholder:"请简单介绍一下建议30字符以内","show-word-limit":"",maxlength:"200"},null,8,["modelValue"])])),_:1}),d(Z,{label:"是否网页APP"},{default:n((()=>[d(le,{"active-value":1,"inactive-value":0,modelValue:P.value.app,"onUpdate:modelValue":l[8]||(l[8]=e=>P.value.app=e)},null,8,["modelValue"])])),_:1}),d(Z,{label:"标签添加量（热度）"},{default:n((()=>[d(ae,{modelValue:P.value.install_num,"onUpdate:modelValue":l[9]||(l[9]=e=>P.value.install_num=e),class:"w-full",placeholder:"数值越高排名越高"},null,8,["modelValue"])])),_:1}),d(Z,{label:"排行"},{default:n((()=>[d(ae,{modelValue:P.value.hot,"onUpdate:modelValue":l[10]||(l[10]=e=>P.value.hot=e),class:"w-full",placeholder:"数值越高排名越高"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),d(H,{type:"primary",class:"w-full",onClick:X},{default:n((()=>[m("保存")])),_:1})])),_:1},8,["modelValue"]),d(oe,{modelValue:D.value,"onUpdate:modelValue":l[18]||(l[18]=e=>D.value=e),width:"1000px",title:"分类管理","close-on-click-modal":!1},{default:n((()=>[u("div",k,[d(N,{border:"",data:S.value,style:{width:"100%"},height:"450"},{default:n((()=>[d(J,{prop:"id",fixed:"",label:"分类ID",width:"90",align:"center"}),d(J,{prop:"name",label:"分类名称"}),d(J,{prop:"sort",sortable:"",align:"center",width:"120",label:"分类排序"}),d(J,{fixed:"right",label:"操作",align:"center",width:"150"},{default:n((e=>[d(H,{type:"success",size:"small",onClick:l=>G(e.row)},{default:n((()=>[m("修改")])),_:2},1032,["onClick"]),d(H,{type:"danger",size:"small",onClick:l=>{return a=e.row,void g.confirm("是否删除当前标签分类","危险警告").then((e=>{i({url:"/linkStore/createFolder",method:"post",data:{type:"del",id:a.id}}).then((e=>{f.success(e.msg),1===e.code&&(z(),L.value=!1)}))}));var a}},{default:n((()=>[m("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),u("div",x,[d(H,{type:"primary",class:"m-auto w-1/5",onClick:l[13]||(l[13]=e=>G(0))},{default:n((()=>[m("新增")])),_:1})]),d(oe,{modelValue:L.value,"onUpdate:modelValue":l[17]||(l[17]=e=>L.value=e),width:"500px","align-center":"","append-to-body":"",title:"分类编辑"},{default:n((()=>[d(te,{modelValue:P.value,"onUpdate:modelValue":l[16]||(l[16]=e=>P.value=e),"label-position":"top"},{default:n((()=>[d(Z,{label:"分类名称"},{default:n((()=>[d(U,{modelValue:O.value.name,"onUpdate:modelValue":l[14]||(l[14]=e=>O.value.name=e),"show-word-limit":"",maxlength:"50",placeholder:"请输入分类名称"},null,8,["modelValue"])])),_:1}),d(Z,{label:"分类排序"},{default:n((()=>[d(ae,{modelValue:O.value.sort,"onUpdate:modelValue":l[15]||(l[15]=e=>O.value.sort=e),class:"w-full",placeholder:"请输入展示排序（值越大越靠前）"},null,8,["modelValue"])])),_:1}),u("div",C,[d(H,{class:"m-auto w-2/5",type:"primary",onClick:Q},{default:n((()=>[m("保存")])),_:1})])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])}}};export{U as default};

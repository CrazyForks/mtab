import{r as e,u as s,s as t,x as a,E as n,o as l,c as i,d as o,l as r,m as u,e as p,j as d,F as m,f as c,g as v,h,t as x,T as f,p as g,Z as k}from"./index.1711290598880.js";import{C as y,a as w}from"./href.1711290598880.js";import"./dialog.1711290598880.js";var C="/dist/assets/del.1711290598880.svg";const X=["onClick"],b=[p("img",{src:"/dist/assets/open.1711290598880.svg",style:{width:"18px",height:"18px",transform:"translateX(-2px)"}},null,-1),p("span",{style:{transform:"translateX(-2px)"}},"新标签打开",-1)],I={key:1,class:"mouseItem"},G=[p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:"/dist/assets/layout.1711290598880.svg"},null,-1),p("span",{style:{transform:"translateX(1px)"}},"布局",-1)],L={key:2,class:"layoutSet"},M={key:3,class:"mouseItem mhover pageGroup"},j=p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:"/dist/assets/send.1711290598880.svg"},null,-1),E=p("span",{style:{transform:"translateX(-2px)"}},"移动至分类",-1),_=p("img",{style:{position:"absolute",right:"2px",width:"25px",height:"25px"},src:"/dist/assets/right.1711290598880.svg",alt:""},null,-1),z=["onClick"],H=[p("img",{src:"/dist/assets/edit.1711290598880.svg",alt:""},null,-1),p("span",{style:{transform:"translateX(1px)"}},"编辑图标",-1)],P=[p("img",{src:"/dist/assets/dock.1711290598880.svg",alt:""},null,-1),p("span",null,"加入任务栏",-1)],T=["onClick"],W=[p("img",{style:{width:"17px",height:"17px",transform:"translateX(-2px)"},src:"/dist/assets/jiesan.1711290598880.svg"},null,-1),p("span",null,"解散文件夹",-1)],F=["onClick"],S=[p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:C},null,-1),p("span",null,"删除卡片",-1)],Z=["onClick"],q=[p("img",{style:{width:"18px",height:"18px",transform:"translateX(-2px)"},src:C},null,-1),p("span",{style:{transform:"translateX(-2px)"}},"删除标签",-1)],A={__name:"mouseMenu",setup(C){const A=e(""),B=e(!1),D=s(),J=e(!1),K=e(""),N=e(0);let O={},Q={},R=e(!0);const U=e(!1),V=t({top:"0px",left:"0px"}),Y=a((()=>{let e=D.state.link.filter((e=>"pageGroup"===e.type));return e.unshift({name:"主页",id:""}),e.sort(((e,s)=>{const{sort:t}=e,{sort:a}=s;return t-a}))})),$=async()=>{if("iconGroup"===Q.component)try{await k.confirm("删除文件夹会连带文件夹内部的图标一并删除，是否删除？","删除确认")}catch(e){return}D.commit("delLink",Q.id),J.value=!1,(null==O?void 0:O.call)&&(null==O||O.call())},ee=()=>{D.state.link.forEach((e=>{e.pid===Q.id&&(e.pid="",e.sort=9999,e.pageGroup=Q.pageGroup||"")})),D.commit("delLink",Q.id),J.value=!1},se=()=>{let e=Q.id;if(D.state.tabbar.find((s=>s.id===e)))return void(J.value=!1);let s=D.getters.find(e);D.state.tabbar.push(s),D.commit("updateTabbar",D.state.tabbar),J.value=!1},te=()=>{y["tab://addicon"]({data:Q}),J.value=!1},ae=e=>{Q.size=e;const s=D.state.link.find((e=>e.id===Q.id));s&&(s.size=e),D.commit("updateLink"),J.value=!1},ne=()=>{w(Q.url,!0),J.value=!1},le=e=>{V.top=e.top+"px",e.top+220>window.innerHeight&&(V.top=window.innerHeight-230+"px",e.left+=2),V.left=e.left+"px",e.left+140>window.innerWidth&&(V.left=window.innerWidth-150+"px"),Q=e.data,O=e,K.value=Q.type;const{app:s=0,pid:t=null}=D.state.link.find((e=>e.id===Q.id));N.value=s,"icon"===K.value?(U.value=!0,1===N.value&&(U.value=/^http/.test(Q.url))):U.value=!1,B.value="iconGroup"===Q.component,R.value=!t,J.value=!0},ie=e=>{J.value&&(J.value=!1)};return n.on("mouseMenuClose",ie),window.addEventListener("mousedown",ie),n.on("mousePs",le),l((()=>{window.removeEventListener("mousedown",ie),n.off("mousePs",le)})),(e,s)=>J.value?(i(),o("div",{key:0,class:"mouseMenu",style:g(V),onMousedown:s[3]||(s[3]=r((()=>{}),["stop"])),onContextmenu:s[4]||(s[4]=r((()=>{}),["prevent"]))},[U.value?(i(),o("div",{key:0,class:"mouseItem mhover",onClick:r(ne,["stop"])},b,8,X)):u("",!0),"component"===K.value?(i(),o("div",I,G)):u("",!0),"component"===K.value?(i(),o("div",L,[p("div",{onClick:s[0]||(s[0]=e=>ae("2x4"))},"2x4"),p("div",{onClick:s[1]||(s[1]=e=>ae("2x2"))},"2x2"),p("div",{onClick:s[2]||(s[2]=e=>ae("1x1"))},"1x1")])):u("",!0),d(R)&&d(D).state.config.theme.pageGroup?(i(),o("div",M,[j,E,_,p("div",{class:"childrenMenu",ref_key:"childrenMenu",ref:A},[(i(!0),o(m,null,c(d(Y),(e=>(i(),v(f,{key:e.id},{default:h((()=>[p("div",{onClick:r((s=>(e=>{const s=D.state.link.find((e=>e.id===Q.id));s&&(s.pageGroup=e,D.commit("setLink",s)),J.value=!1})(e.id)),["stop"]),class:"mouseItem mhover"},x(e.name),9,z)])),_:2},1024)))),128))],512)])):u("",!0),"icon"===K.value?(i(),o("div",{key:4,class:"mouseItem mhover",onClick:te},H)):u("",!0),"icon"===K.value?(i(),o("div",{key:5,class:"mouseItem mhover",onClick:se},P)):u("",!0),B.value?(i(),o("div",{key:6,class:"mouseItem mhover",onClick:r(ee,["stop"])},W,8,T)):u("",!0),"component"===K.value?(i(),o("div",{key:7,class:"mouseItem mhover",onClick:r($,["stop"])},S,8,F)):(i(),o("div",{key:8,class:"mouseItem mhover",onClick:r($,["stop"])},q,8,Z))],36)):u("",!0)}};export{A as default};
